function mathUtils(){}this.jks=this.jks||{},function(){function e(){function e(){function e(){function e(){o=new jks.Controller(i,n)}i=new jks.Config(t.getResult()[0]),t.destroy(),n=new jks.DataHandler(i),n.s.onDataHandlerReady.add(e)}console.log("init => core");var t=new createjs.JSONLoader("assets/js/bin/content.json");t.addEventListener("complete",e),t.load()}t=this,e()}var t,i,n,o;jks.Core=e}(),this.jks=this.jks||{},function(){function e(e){t=this,this.version="0.7.3",this.device="",this.debug=!1,this.log=!1,i=e,this.numPages=i.pages.length,this.pages=i.pages,this.pageData=[],this.navigationData={menue:[{title:"vita",selectionID:"vita"},{title:"kontakt",selectionID:"kontakt"},{title:"impressum",selectionID:"impressum"},{title:"aktuelles",selectionID:"aktuelles"}]},this.colors={blue:4227200,light_blue:7449515,lighter_blue:10012615,white:16777215,overlay:13299952},this.shaders=[],this.backgroundImageSize={width:1200,height:800},this.mobileSwitchWidth=620;for(var n=0;n<this.numPages;n++){var o={};o.pageID=n,o.contentLoaded=!1,o.category=i.pages[n].category,o.categoryText=i.pages[n].categoryText,o.numImages=i.pages[n].items.length,o.images=[],o.items=i.pages[n].items,this.pageData.push(o)}this.assets={},this.assets.manifest=[{src:"assets/img/bg_home.jpg",id:"bg_home"},{src:"assets/img/bg_vita.jpg",id:"bg_vita"},{src:"assets/img/navigation/side_nav_arrow.png",id:"side_nav_arrow"},{src:"assets/img/navigation/mobileNavToggleIcon.png",id:"mobileNavToggleIcon"},{src:"assets/img/navigation/mobileNavCloseIcon.png",id:"mobileNavCloseIcon"},{src:"assets/img/navigation/selectNavToggleIconClosed.png",id:"selectNavToggleIconClosed"},{src:"assets/img/navigation/selectNavToggleIconOpen.png",id:"selectNavToggleIconOpen"},{src:"assets/img/navigation/01_meeresrauschen.png",id:"meeresrauschen"},{src:"assets/img/navigation/02_fragmente.png",id:"fragmente"},{src:"assets/img/navigation/03_entschaerft.png",id:"entschaerft"},{src:"assets/img/navigation/04_trauringe.png",id:"trauringe"},{src:"assets/img/navigation/05_zeitlos.png",id:"zeitlos"},{src:"assets/img/navigation/navSelectBackground.png",id:"navSelectBackground"},{src:"assets/img/navigation/thumb_nav_arrow.png",id:"thumb_nav_arrow"}],device.mobile()?this.device="mobile":device.tablet()||isMobile.apple.tablet?this.device="tablet":device.desktop()&&(this.device="desktop"),this.debug||this.log?(document.getElementById("version").innerHTML="version: "+this.version+"<br/>device: "+this.device+"<br/>dpr: "+jks.Config.getDeviceResolution()+"<br/>webgl: "+PIXI.utils.isWebGLSupported(),document.getElementById("version").style.display="block",this.debug&&(document.getElementById("version").style.width="130px"),this.log&&window.debugLog()):window.hideLog(),console.log("Config :: pageData created!")}var t,i;jks.Config=e,jks.Config.getDeviceType=function(){return t.device},jks.Config.getDeviceResolution=function(){var e=device.desktop()?1:res.dppx();return e},jks.Config.getColor=function(e){return t.colors[e]},jks.Config.backgroundImageSize=function(){return t.backgroundImageSize},jks.Config.mobileSwitchWidth=function(){return t.mobileSwitchWidth},jks.Config.shaders=function(){return t.shaders}}(),this.jks=this.jks||{},function(){function e(e){function s(){console.log("init - DataHandler"),a()}function a(){for(var i=0;i<e.numPages;i++){for(var n=[],s=0;s<e.pages[i].items.length;s++)e.pages[i].items[s].img.src=e.pages[i].items[s].img.src,n.push(e.pages[i].items[s].img);o.push(n)}TweenLite.delayedCall(.0333,function(){t.s.onDataHandlerReady.dispatch()})}function l(){PIXI.loader.load()}function h(e,i){t.s.onAssetsLoaded.dispatch(i.shader.data)}t=this,this.s={onDataHandlerReady:new signals.Signal,onAssetsLoadingProgress:new signals.Signal,onAssetsLoaded:new signals.Signal,onSlideLoadingProgress:new signals.Signal,onSlideLoaded:new signals.Signal},this.loadAssets=function(){function i(e){t.s.onAssetsLoadingProgress.dispatch(e.loaded)}function o(){console.log("assets loaded!"),l()}n=new createjs.LoadQueue(!1),n.addEventListener("progress",i),n.addEventListener("complete",o),n.loadManifest(e.assets.manifest)},PIXI.loader.add("shader","assets/js/bin/filters/treshold.frag"),PIXI.loader.once("complete",h),this.loadSlide=function(n){function s(e){t.s.onSlideLoadingProgress.dispatch(e.loaded)}function a(){for(var o=0;o<e.pageData[n].numImages;o++){var s=o+1,a=s<10?"0":"",l=e.pageData[n];l.images.push(i.getResult("img_"+e.pageData[n].category+"_"+a+s))}console.log("pageLoaded!",n),e.pageData[n].contentLoaded=!0,t.s.onSlideLoaded.dispatch(n)}console.log("loadSlide",e.pageData[n]),i=new createjs.LoadQueue(!1),i.addEventListener("progress",s),i.addEventListener("complete",a),i.loadManifest(o[n])},s()}var t,i,n,o=[];jks.DataHandler=e,jks.DataHandler.getAssetByID=function(e){return n.getResult(e)},jks.DataHandler.getShader=function(e){return console.log(t.shaders[0]),t.shaders[0]}}(),this.jks=this.jks||{},function(){function e(){function e(e,t){crossroads.parse(e)}console.log("init - Router"),crossroads.addRoute("/",function(){}),crossroads.addRoute("/user/{userId}",function(e){console.log("user",e)}),crossroads.addRoute("/schmuck/zeitlos",function(){console.log("/schmuck/zeitlos")}),crossroads.addRoute("/page/imprint",function(e){console.log("imprint")}),crossroads.bypassed.add(function(e){console.error(e+" seems to be a dead end...")}),window.addEventListener("hashchange",function(){var e="/",t=window.location.hash;t.length>0&&(e=t.split("#").pop()),crossroads.parse(e)}),hasher.initialized.add(e),hasher.init(),document.body.addEventListener("click",function(){hasher.setHash("user/23")})}jks.Router=e}(),this.jks=this.jks||{},function(){function e(e){function w(){"home"!=f&&(t.s.onTapHome.dispatch(),t.isMobile&&C(),D(),I(),g.reset(),f="home",M=null)}function v(){g=new jks.SelectNavigation(e,d),g.s.onTap.add(m),t.container.addChild(g.container)}function m(e){"slides"!=f&&(f="slides",I()),e!=M&&("mobile"==jks.Config.getDeviceType()&&device.landscape()&&V(),t.s.onIconNavSelect.dispatch(e),M=e)}function b(){for(var i=0,n=0;n<e.navigationData.menue.length;n++){var s=new jks.TopNavButton(e.navigationData.menue[n],n);s.container.x=i,s.container.id=n,s.s.onTap.add(k),i+=s.container.width,n==e.navigationData.menue.length-1&&(O.width=i),o.addChild(s.container),t.topNavButtons.push(s)}y(),S()}function k(e,i){f!=e&&(console.log("onPageNavSelect",i),f=e,I(),t.topNavButtons[i].container.getChildAt(1).style.fontWeight="bolder",t.topNavButtons[i].container.getChildAt(2).alpha=1,g.reset(),M=null,p&&C(),t.s.onPageNavSelect.dispatch(e))}function I(){for(var e=0;e<t.topNavButtons.length;e++)t.topNavButtons[e].container.getChildAt(1).style.fontWeight="normal",t.topNavButtons[e].container.getChildAt(2).alpha=0}function y(){s=new PIXI.Container,s.interactive=!0,s.buttonMode=!0,s.x=o.width+100,s.y=10,s.visible=!0,s.on("mousedown",T).on("touchstart",T);var e=new PIXI.Graphics;e.beginFill(52224),e.drawRect(0,0,35,35),e.endFill,e.alpha=0,a=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("mobileNavToggleIcon").src),l=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("mobileNavCloseIcon").src),a.scale.x=a.scale.y=.5,l.scale.x=l.scale.y=.5,l.visible=!1,s.addChild(e),s.addChild(a),s.addChild(l),o.addChild(s)}function T(){B?C():x(),t.s.navEvent.dispatch("navVisible",B)}function C(){jks.View.hideOverlay(),B=!1,l.visible=!1,a.visible=!0;for(var e=0;e<t.topNavButtons.length;e++)TweenLite.killTweensOf(t.topNavButtons[e].container),TweenLite.set(t.topNavButtons[e].container,{alpha:0}),t.topNavButtons[e].container.visible=!1;"mobile"==jks.Config.getDeviceType()&&device.landscape()&&(H.visible=!0)}function x(){console.log("show NAv!"),D(),u||jks.View.showOverlay(),B=!0,a.visible=!1,l.visible=!0;for(var e=0,i=0;i<t.topNavButtons.length;i++)TweenLite.killTweensOf(t.topNavButtons[i].container),t.topNavButtons[i].container.visible=!0,t.topNavButtons[i].switchMobile(),t.topNavButtons[i].container.x=140,t.topNavButtons[i].container.y=50+e,e+=t.topNavButtons[i].container.height,TweenLite.to(t.topNavButtons[i].container,.5,{alpha:1,delay:.1*i});"mobile"==jks.Config.getDeviceType()&&device.landscape()&&(H.visible=!1)}function S(){h=new PIXI.Container,h.interactive=!0,h.buttonMode=!0,h.x=-50,h.y=3,h.visible=!0,h.on("mousedown",j).on("touchstart",j);var e=new PIXI.Graphics;e.beginFill(13369344),e.drawRect(0,0,45,35),e.endFill,e.alpha=0,r=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("selectNavToggleIconClosed").src),c=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("selectNavToggleIconOpen").src),r.scale.x=r.scale.y=.5,c.scale.x=c.scale.y=.5,r.x=c.x=5,c.visible=!1,h.addChild(e),h.addChild(r),h.addChild(c),o.addChild(h)}function j(){W?D():L(),t.s.navEvent.dispatch("selectionVisible",W)}function D(e){e=e||!1,jks.View.hideOverlay(),W=!1,c.visible=!1,r.visible=!0,g.hide(e),H&&"mobile"==jks.Config.getDeviceType()&&device.landscape()&&(H.visible=!0)}function L(){t.isMobile&&C(),"home"!=f&&jks.View.showOverlay(),W=!0,r.visible=!1,c.visible=!0,g.show(),"mobile"==jks.Config.getDeviceType()&&device.landscape()&&(H.visible=!1)}function P(){H=new PIXI.Container,H.interactive=!0,H.buttonMode=!0,H.pivot.x=.5*z.width,H.pivot.y=.5*z.height,H.visible=!1,H.activated=!1,H.alpha=0,H.on("mouseup",N).on("touchend",N);var e=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("thumb_nav_arrow").src);e.scale.x=e.scale.y=.5,e.y=10,e.x=5;var i=new PIXI.Graphics;i.beginFill(jks.Config.getColor("light_blue")),i.drawRect(0,0,z.width,z.height),i.endFill,i.alpha=0,H.x=.5*jks.View.getScreenWidth(),H.y=jks.View.getScreenHeight()-.5*H.height,H.addChild(i),H.addChild(e),t.container.addChild(H)}function N(){TweenLite.set(H,{alpha:0}),TweenLite.to(H,.3,{delay:.3,alpha:1}),H.activated?(H.activated=!1,H.x=.5*jks.View.getScreenWidth(),H.y=jks.View.getScreenHeight()-.5*H.height,H.rotation=0,H.scale.x=H.scale.y=1):(H.activated=!0,H.rotation=Math.PI,H.scale.x=H.scale.y=.9,H.x=.5*jks.View.getScreenWidth(),H.y=jks.View.getScreenHeight()-H.thumbNavHeight-.5*H.height),t.s.onToggleThumbNav.dispatch(H.activated)}function F(){H.activated=!1,H.visible=!0,H.x=.5*jks.View.getScreenWidth(),H.y=jks.View.getScreenHeight()-.5*H.height,H.rotation=0,H.scale.x=H.scale.y=1,H.alpha=1}function V(){H.visible=!1,H.alpha=0,H.activated=!1}function X(){document.onkeydown=function(e){switch(e.keyCode){case 39:jks.ThumbNavigation.isLocked()||(t.s.onKeyDownEvent.dispatch("next"),jks.SideNavigation.triggerArrow("next"));break;case 37:jks.ThumbNavigation.isLocked()||(t.s.onKeyDownEvent.dispatch("prev"),jks.SideNavigation.triggerArrow("prev"));break;case 38:break;case 40:}}}t=this,console.log("init - Navigation",jks.Config.getDeviceType()),this.s={onKeyDownEvent:new signals.Signal,onIconNavSelect:new signals.Signal,onPageNavSelect:new signals.Signal,onTapHome:new signals.Signal,onToggleThumbNav:new signals.Signal,navEvent:new signals.Signal},this.isMobile=!1,this.topNavButtons=[];var M=null;this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.selectedPageText=null,"desktop"==jks.Config.getDeviceType()&&X(),i=document.getElementById("jk-logo"),n=document.getElementById("svg_logo_text"),i.addEventListener("mousedown",w),TweenLite.set(i,{left:15,top:15}),this.wakeUp=function(){TweenLite.set(i,{display:"block",opacity:1})};var B=!1;o=new PIXI.Container,t.container.addChild(o),console.log(o.position);var H,O={width:0},W=!0,z={width:61.5,height:45};this.switchMobile=function(){C(),TweenLite.set(n,{display:"none"});for(var e=0,i=0;i<this.topNavButtons.length;i++)t.topNavButtons[i].switchMobile(),t.topNavButtons[i].container.x=140,t.topNavButtons[i].container.y=50+e,e+=t.topNavButtons[i].container.height;g.switchMobile(),h.x=200,h.y=10,s.x=255,u=!1,p=!0},this.switchDefault=function(){x(),"mobile"!=jks.Config.getDeviceType()&&TweenLite.set(n,{display:"block"});for(var e=0,i=0;i<this.topNavButtons.length;i++)t.topNavButtons[i].switchDefault(),t.topNavButtons[i].container.x=e,t.topNavButtons[i].container.y=0,e+=t.topNavButtons[i].container.width;g.switchDefault(),h.x=-50,h.y=3,s.x=o.width+100,u=!1,p=!1},this.switchMode=function(e){console.log("navigation - switchMode",e),t.isMobile=e,u=!0,e?t.switchMobile():t.switchDefault()},this.onOrientationChange=function(){console.log("navigation - onOrientationChange"),"mobile"==jks.Config.getDeviceType()&&("home"!=f&&D(!0),TweenLite.delayedCall(.1,g.onOrientationChange),device.portrait()&&V())},this.thumbNavigationShow=function(e,t){H.thumbNavHeight=t,e||F()},this.hide=function(){D(),H&&"mobile"==jks.Config.getDeviceType()&&(H.visible=!1)},this.show=function(){L()};var R,A,_,E=15,G=30;this.updateView=function(){R=jks.View.getScreenWidth(),R<=768?(A=mathUtils.convertToRange(R,[0,768],[.4,.7]),TweenLite.set(i,{left:E,top:E})):(A=.7,_=mathUtils.convertToRange(R,[728,1200],[0,1]),TweenLite.set(i,{left:E+_*G,top:E+_*G})),TweenLite.set(i,{width:360*A}),"mobile"==jks.Config.getDeviceType()?(o.x=jks.View.getScreenWidth()-O.width,o.y=5):(o.x=jks.View.getScreenWidth()-O.width-15,o.y=10),g&&g.updateView(o.x)},b(),v(),D(),"mobile"==jks.Config.getDeviceType()&&P()}var t,i,n,o,s,a,l,h,r,c,d,g,u,p,f="home";jks.Navigation=e,jks.Navigation.getTopNavPosition=function(){return o.position},jks.Navigation.getCurrentSelectedPage=function(){return f},jks.Navigation.isMobile=function(){return p}}(),this.jks=this.jks||{},function(){function e(e,a){function l(){t.s.onTap.dispatch(e.selectionID,a)}t=this,this.s={onTap:new signals.Signal},this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.textField=new PIXI.Text(e.title,{fontFamily:"Linotype Feltpen W01 Medium",fontSize:i,fill:jks.Config.getColor("blue"),align:"left"}),this.shape=new PIXI.Graphics,this.shape.beginFill(56576),this.shape.drawRect(0,0,this.textField.width+2*o,this.textField.height+2*s),this.shape.endFill,this.shape.alpha=0,this.line=new PIXI.Graphics,this.line.lineStyle(1,4227200,1),this.line.moveTo(0,this.textField.height+s),this.line.lineTo(this.textField.width+2*o,this.textField.height+s),this.line.alpha=0,this.container.addChild(this.shape),this.container.addChild(this.textField),this.container.addChild(this.line),this.centerText=function(){this.textField.x=.5*this.shape.width-.5*this.textField.width,this.textField.y=.5*this.shape.height-.5*this.textField.height,this.line.clear(),this.line.lineStyle(1,4227200,1),this.line.moveTo(0,this.textField.height+s),this.line.lineTo(this.textField.width+2*o,this.textField.height+s)},this.setText=function(){this.textField.x=this.shape.width-this.textField.width,this.textField.y=.5*this.shape.height-.5*this.textField.height,this.line.clear(),this.line.lineStyle(1,4227200,1),this.line.moveTo(this.shape.width,this.textField.height+s),this.line.lineTo(this.shape.width-this.textField.width,this.textField.height+s)},this.centerText(),this.switchMobile=function(){this.textField.style.fontSize=n,this.textField.style.align="left",this.shape.width=120,this.shape.x=o,this.shape.height=this.textField.height+2*s,this.setText()},this.switchDefault=function(){this.textField.style.fontSize=i,this.shape.width=this.textField.width+2*o,this.shape.height=this.textField.height+2*s,this.shape.x=0,this.centerText()},this.getWidth=function(){return t.shape.width},this.container.on("mousedown",l).on("touchstart",l)}var t,i=18,n=23,o=10,s=10;jks.TopNavButton=e}(),this.jks=this.jks||{},function(){function e(e,s,a){function l(){return 90*o/.5}function h(){t.s.onTapSelect.dispatch(a)}t=this,this.s={onTapSelect:new signals.Signal},this.id=a,this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.container.on("mousedown",h).on("touchstart",h),this.textField=new PIXI.Text(s,{fontFamily:"Linotype Feltpen W01 Medium",fontSize:i,fill:jks.Config.getColor("light_blue"),align:"left"}),this.textField.style.fill=16763955;var r=jks.Config.getColor("light_blue"),c=jks.Config.getColor("blue"),d=7723738,g={home_portrait:[c,r,r,d,d],home_landscape:[d,d,d,d,d],default:[c,c,c,c,c]};this.setTextColor=function(e){this.textField.style.fill=g[e][a]};var u=new PIXI.Container,p=new PIXI.Sprite.fromImage(e),f=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("navSelectBackground").src);f.visible=!1,u.addChild(f),u.addChild(p),this.shape=new PIXI.Graphics,this.shape.beginFill(8602008),this.shape.drawRect(0,0,l()+this.textField.width+2*n,l()),this.shape.endFill,this.shape.alpha=0,this.shape.x=0,this.container.addChild(u),this.container.addChild(this.shape),this.container.addChild(this.textField),this.switchMobile=function(){o=.37,u.scale.x=u.scale.y=o,this.textField.x=-this.textField.width-n,this.textField.y=.5*this.shape.height-.5*this.textField.height,this.shape.width=l()+this.textField.width+n,this.shape.height=l(),this.shape.x=-this.textField.width-n},this.switchDefault=function(){o="mobile"==jks.Config.getDeviceType()?.37:.45,u.scale.x=u.scale.y=o,this.textField.x=l()+n,this.textField.y=.5*l()-.5*this.textField.height,this.shape.width=l()+this.textField.width+n,this.shape.height=l(),this.shape.x=0},this.portraitMode=function(){"mobile"==jks.Config.getDeviceType()&&(this.textField.x=-this.textField.width-n,this.textField.y=.5*this.shape.height-.5*this.textField.height,this.shape.width=l()+this.textField.width+n,this.shape.height=l(),this.shape.x=-this.textField.width-n)},this.landscapeMode=function(){this.textField.x=.5*l()-.5*this.textField.width,this.textField.y=l(),this.shape.width=this.textField.width,this.shape.height=l()+this.textField.height,this.shape.x=this.textField.x,"mobile"==jks.Config.getDeviceType()},this.select=function(){f.visible=!0,p.alpha=.5},this.unselect=function(){f.visible=!1,p.alpha=1},this.setColor=function(e){console.log("set",e),t.textField.style.fill=e},this.update=function(e){u.scale.x=u.scale.y=e*o},this.getRealImgWidth=function(){return l()},this.getWidth=function(){return t.shape.width},this.getHeight=function(){return t.shape.height}}var t,i=23,n=10,o=.45;jks.SelectNavButton=e}(),this.jks=this.jks||{},function(){function e(e){function o(e){t.s.onTap.dispatch(e);for(var i=0;i<t.buttons.length;i++)t.buttons[i].unselect();t.buttons[e].select()}function s(){for(var e=0;e<t.buttons.length;e++)t.buttons[e].portraitMode(),t.buttons[e].container.x=0,t.buttons[e].container.y=e*(t.buttons[e].getRealImgWidth()+10);t.updateView()}function a(){i=0,n=0,console.log("landscapeMode");for(var e=0;e<t.buttons.length;e++)t.buttons[e].landscapeMode(),t.buttons[e].container.x=i,1==e&&(t.buttons[e].container.x-=10),t.buttons[e].container.y=0,i+=.95*t.buttons[e].container.width+15;n=t.buttons[0].getHeight(),t.updateView()}function l(){}t=this,console.log("init - SelectNavigation"),this.s={onTap:new signals.Signal},this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.buttons=[];for(var h=0;h<e.numPages;h++){var r=new jks.SelectNavButton(jks.DataHandler.getAssetByID(e.pages[h].category).src,e.pages[h].categoryText,h);r.container.alpha=0,r.s.onTapSelect.add(o),r.container.x-=r.getRealImgWidth(),r.container.y=h*(r.getRealImgWidth()+10),t.container.addChild(r.container),t.buttons.push(r)}this.setButtonColors=function(e){for(var i=0;i<t.buttons.length;i++)t.buttons[i].setTextColor(e)},"mobile"==jks.Config.getDeviceType()?device.portrait()?t.setButtonColors("home_portrait"):t.setButtonColors("home_landscape"):t.setButtonColors("home_portrait"),this.reset=function(){for(var e=0; e<t.buttons.length; e++)t.buttons[e].unselect()},this.updateView=function(e){"mobile"==jks.Config.getDeviceType()?device.portrait()?(t.container.x=.6*jks.View.getScreenWidth(),t.container.y=.15*jks.View.getScreenHeight()):(t.container.x=.5*jks.View.getScreenWidth()-.5*i+25,t.container.y=.5*jks.View.getScreenHeight()-.5*n):jks.View.getScreenWidth()<jks.Config.mobileSwitchWidth()?(t.container.x=.6*jks.View.getScreenWidth(),t.container.y=.15*jks.View.getScreenHeight()):(t.container.x=e-45,t.container.y=.15*jks.View.getScreenHeight())},t.updateView(),this.switchMobile=function(){for(var e=0;e<t.buttons.length;e++)t.buttons[e].switchMobile();"mobile"==jks.Config.getDeviceType()&&(device.portrait()?s():a())},this.switchDefault=function(){for(var e=0;e<t.buttons.length;e++)t.buttons[e].switchDefault(),t.buttons[e].container.x=0,t.buttons[e].container.y=e*(t.buttons[e].getRealImgWidth()+10)},this.onOrientationChange=function(){device.portrait()?s():a()},this.lock=function(){t.container.buttonMode=!1,t.container.interactive=!1,t.container.visible=!1},this.unlock=function(){t.container.buttonMode=!0,t.container.interactive=!0,t.container.visible=!0},this.hide=function(e){e=e||!1,console.log("SelectNavigation - hide",e);for(var i=i=e?0:.03,n=(t.buttons.length-1)*i,o=0;o<t.buttons.length;o++)TweenLite.to(t.buttons[o].container,.2,{delay:(n-o)*i,alpha:0,ease:Expo.easeIn});e?t.lock():(TweenLite.killDelayedCallsTo(t.lock),TweenLite.delayedCall(.3,t.lock))},this.show=function(){for(var e=0;e<t.buttons.length;e++)TweenLite.set(t.buttons[e].container,{visible:!0,alpha:0}),TweenLite.to(t.buttons[e].container,.2,{delay:.07*e,alpha:1,ease:Expo.easeOut});TweenLite.killDelayedCallsTo(t.lock),t.unlock()},"mobile"==jks.Config.getDeviceType()?(t.switchMobile(),device.portrait()?s():a()):t.switchDefault(),l()}var t,i=0,n=0;jks.SelectNavigation=e,jks.SelectNavigation.setButtonColors=function(e){t.setButtonColors(e)}}(),this.jks=this.jks||{},function(){function e(e,D){function L(){window.addEventListener("resize",Q),window.addEventListener("orientationchange",function(){var e;e=device.portrait()?"portrait":"landscape",t.s.onOrientationChange.dispatch(e),q(e)},!1)}function P(){var e=document.getElementById("screen"),t={transparent:!1,backgroundColor:jks.Config.getColor("blue"),resolution:jks.Config.getDeviceResolution(),antialias:!1,autoResize:!1,roundPixels:!0};i=new PIXI.autoDetectRenderer(S(),j(),t),e.appendChild(i.view),n=new PIXI.Container,n.interactive=!0}function N(){p=new PIXI.Graphics,p.beginFill(65382),p.drawRect(0,0,1,1),p.endFill,p.alpha=0,p.interactive=!0,p.buttonMode=!0,p.defaultCursor="auto",p.on("mousedown",F).on("touchstart",F).on("mousemove",V).on("touchmove",V).on("mouseup",X).on("mouseupoutside",X).on("touchend",X).on("touchendoutside",X)}function F(e){ee.startX=e.data.global.x,ee.isDragging=!0,ee.startTransition=!1,ee.range=.7*S(),p.defaultCursor="none",oe.setSelectedThumb(y.currentImage)}function V(e){ee.isDragging&&(ee.offsetX=e.data.global.x-ee.startX,ee.offsetX>=0?ee.direction="next":ee.direction="prev",ee.offsetX=Math.abs(ee.offsetX),ee.offsetX>0&&(k||z(),ee.startTransition=!0,oe.isLocked=!0),ee.normalizedDrag=mathUtils.convertToRange(ee.offsetX,[0,ee.range],[0,1]),k&&ee.startTransition&&(ee.normalizedDrag<1?W(ee.normalizedDrag):(G(),ee.isDragging=!1,ee.startTransition=!1,k=!1,oe.isLocked=!1)))}function X(e){ee.isDragging=!1,p.defaultCursor="auto";var t={p:ee.normalizedDrag};ee.startTransition&&(ee.normalizedDrag<=.5?(y.currentImage=y.previousImage,TweenLite.to(t,1,{p:0,ease:Sine.easeOut,onUpdate:function(){W(t.p)},onComplete:function(){k=!1,oe.isLocked=!1,ee.startTransition=!1,r.uniforms.offset.x=1}})):TweenLite.to(t,.5,{p:1,ease:Circ.easeIn,onUpdate:function(){W(t.p)},onComplete:function(){k=!1,oe.isLocked=!1,ee.startTransition=!1,r.uniforms.offset.x=1}}))}function M(){s=new PIXI.Container,a=new PIXI.Container,t.containerSlideImages.addChild(s),t.containerSlideImages.addChild(a),l=new PIXI.Sprite,h=new PIXI.Sprite,s.addChild(l),a.addChild(h)}function B(e){PIXI.Filter.call(this,null,e)}function H(){r=new B(D),r.padding=0,O()}function O(){r.uniforms.offset.x=1,c=new PIXI.filters.ColorMatrixFilter,c.saturate(-1),a.filters=[r,c],d=new TimelineLite({paused:!0}),d.add(TweenLite.to(r.uniforms.offset,T,{x:0,ease:Linear.easeNone,onStart:E})),g=new TimelineLite({paused:!0,align:"sequence"}),g.add(TweenLite.to(I,.5,{delay:1,saturation:0,ease:Linear.easeNone,onUpdate:_,onComplete:G}))}function W(e){oe.updateDragProgress(e),d.progress(e),g.progress(e)}function z(){"next"==ee.direction?(y.previousImage=y.currentImage,y.currentImage<y.slideNumImages-1?y.currentImage++:y.currentImage=0):"prev"==ee.direction&&(y.previousImage=y.currentImage,y.currentImage>0?y.currentImage--:y.currentImage=y.slideNumImages-1),l.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.previousImage].src),h.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.currentImage].src),k=!0}function R(e){u.setText(y.configData.pageData[y.pageID].items[e])}function A(){oe.isLocked=!0,se&&(se.isLocked=!0),l.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.previousImage].src,x,C),h.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.currentImage].src,x,C),TweenLite.to(d,T,{progress:1,ease:Sine.easeOut}),TweenLite.to(g,T,{progress:1,ease:Circ.easeOut})}function _(){c.saturate(I.saturation)}function E(){ee.isDragging||oe.showProgress(y.currentImage,T)}function G(){I.saturation=-1,r.uniforms.offset.x=1,c.saturate(-1),l.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.currentImage].src),oe.unselectThumbs(),oe.selectThumb(y.currentImage),oe.isLocked=!1,se&&(se.isLocked=!1),d.progress(0),g.progress(0),R(y.currentImage)}function U(){f=new PIXI.Graphics,f.beginFill(jks.Config.getColor("overlay")),f.drawRect(0,0,S(),j()),f.endFill,f.alpha=.6,f.interactive=!0,f.visible=!1,w=document.getElementById("progressBar"),J()}function K(){requestAnimationFrame(K),i.render(n),o&&o.update()}function q(e){oe.container&&oe.onOrientationChange(e)}function Q(e){S()<=jks.Config.mobileSwitchWidth()&&!t.isMobile||"mobile"==jks.Config.getDeviceType()?(t.isMobile=!0,t.s.switchMode.dispatch(t.isMobile)):S()>jks.Config.mobileSwitchWidth()&&t.isMobile&&(t.isMobile=!1,t.s.switchMode.dispatch(t.isMobile)),t.resizeScreen(),t.s.onResize.dispatch()}function J(){f.width=S(),f.height=j(),w.style.left=.5*S()-60+"px",w.style.top=.5*j()-30+"px"}function Y(){y.isActive&&(oe.updateView(),null!=se.container&&se.update(),p.width=S(),p.height=j()-oe.container.getHeight()-60),f.visible&&J(),u.updateView()}function Z(){oe.isLocked=!0,se&&(se.isLocked=!0),t.resizeScreen(),TweenLite.to(d,T,{progress:1,ease:Sine.easeOut}),TweenLite.to(g,T,{progress:1,ease:Circ.easeOut})}function $(e){t.s.onThumbNavigationShow.dispatch(e,oe.container.getHeight())}t=this,v=e.backgroundImageSize.width,m=e.backgroundImageSize.height,b=v/m,console.log("init - View"),this.s={onReady:new signals.Signal,onResize:new signals.Signal,onOrientationChange:new signals.Signal,switchMode:new signals.Signal,onThumbNavigationShow:new signals.Signal},this.isMobile=!1,this.containerPages=new PIXI.Container,this.containerNavigation=new PIXI.Container,this.containerSlideImages=new PIXI.Container,this.containerSlideNavigation=new PIXI.Container,e.debug&&(o=new Stats,o.setMode(0),document.body.appendChild(o.domElement),o.domElement.style.position="absolute",o.domElement.style.left="0px",o.domElement.style.top="60px");var ee={startX:0,offsetX:0,direction:"",isDragging:!1,normalizedDrag:0};B.prototype=Object.create(PIXI.Filter.prototype),B.prototype.constructor=B,this.showSlideLoadingProgress=function(){f.alpha=0,f.visible=!0,TweenLite.to(f,.2,{alpha:.5,ease:Sine.easeIn}),TweenLite.set(w,{opacity:1,width:0,display:"block"}),J()},this.hideSlideLoadingProgress=function(){TweenLite.to(w,.2,{opacity:0}),TweenLite.to(f,.2,{alpha:0,ease:Sine.easeOut,onComplete:function(){f.visible=!1,w.style.display="none"}})},this.updateSlideLoadingProgress=function(e){document.getElementById("progressBar").style.width=120*e+"px"};var te,ie,ne=new PIXI.Point(0,0);this.isMobile=!1,P(),M(),H(),N(),U(),n.addChild(t.containerSlideImages),n.addChild(p),n.addChild(t.containerSlideNavigation),n.addChild(t.containerPages),n.addChild(f),n.addChild(t.containerNavigation),u=new jks.TextField,t.containerSlideImages.addChild(u.container),L(),K(),TweenLite.delayedCall(.5,function(){Q(),t.s.onReady.dispatch()}),this.resizeScreen=function(){Y(),te=S(),ie=j(),i.view.style.width=te+"px",i.view.style.height=ie+"px",i.resize(te,ie),ne.set(te/v),s.children[0].scale=ne,s.children[0].height>=ie?(ne.set(te/v),s.children[0].scale=ne,s.children[0].x=0,s.children[0].y=.5*-(s.children[0].height-ie)):s.height<=ie&&(ne.set(ie/m),s.children[0].scale=ne,s.children[0].y=0,s.children[0].x=.5*(te-s.children[0].width)),a.children[0].x=s.children[0].x,a.children[0].y=s.children[0].y,a.children[0].scale=s.children[0].scale},this.initSlide=function(e,t){y.isCreated&&(l.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.currentImage].src,x,C)),y.previousImage=0,y.currentImage=0,y.slideNumImages=e.pageData[t].images.length,y.pageID=t,y.configData=e,y.isActive=!0,y.isCreated?(h.texture=PIXI.Texture.fromImage(y.configData.pageData[t].images[y.currentImage].src),Z()):l.texture=PIXI.Texture.fromImage(y.configData.pageData[t].images[y.currentImage].src),y.isCreated=!0,u.setCategory(y.configData.pageData[t].categoryText),u.show(),R(y.currentImage)};var oe={};oe.container=null,this.initThumbNavigation=function(){function e(e){e!=y.currentImage&&t.slideTo(e)}oe.container&&(console.log("destroy thumb"),oe.s.onClickThumb.remove(e),oe.container.removeChildren(),t.containerSlideNavigation.removeChild(oe.container),oe.container=null,oe=null),oe=new jks.ThumbNavigation(b),oe.s.onClickThumb.add(e),oe.s.onThumbNavigationShow.add($),t.containerSlideNavigation.addChild(oe.container),oe.init(y)},this.thumbNavToggle=function(e){e?oe.show():oe.hide()};var se={};se.container=null,this.initSideNavigation=function(){function e(){t.slideNext()}function i(){t.slidePrev()}se.container&&(se.s.onTapNext.remove(e),se.s.onTapPrev.remove(i),t.containerSlideNavigation.removeChild(se.container),se.container=null,se=null),se=new jks.SideNavigation,t.containerSlideNavigation.addChild(se.container),se.s.onTapNext.add(e),se.s.onTapPrev.add(i)},this.slideNext=function(){y.previousImage=y.currentImage,y.currentImage<y.slideNumImages-1?y.currentImage++:y.currentImage=0,A(),console.log("slideNext ",y.currentImage)},this.slidePrev=function(){y.previousImage=y.currentImage,y.currentImage>0?y.currentImage--:y.currentImage=y.slideNumImages-1,A(),console.log("slidePrev ",y.currentImage)},this.slideTo=function(e){y.previousImage=y.currentImage,y.currentImage=e,A(),console.log("slideTo ",y.currentImage)}}var t,i,n,o,s,a,l,h,r,c,d,g,u,p,f,w,v,m,b,k=!1,I={saturation:-1,none:0},y={isActive:!1,isCreated:!1},T=1.5,C=PIXI.SCALE_MODES.LINEAR,x=!1,S=function(){return window.innerWidth},j=function(){return window.innerHeight};jks.View=e,jks.View.isMobile=function(){return t.isMobile},jks.View.getScreenWidth=function(){return S()},jks.View.getScreenHeight=function(){return j()},jks.View.forceResize=function(){t.resizeScreen()},jks.View.showOverlay=function(){TweenLite.killTweensOf(f),f.visible=!0,f.width=S(),f.height=j(),u.hide(),TweenLite.to(f,.3,{alpha:.6,ease:Sine.easeOut})},jks.View.isOverlay=function(){return f.visible},jks.View.hideOverlay=function(){console.log("hide overlay"),TweenLite.to(f,.3,{alpha:0,ease:Sine.easeIn,onComplete:function(){f.visible=!1,u.show()}})}}(),this.jks=this.jks||{},function(){function e(e,h){function r(){document.getElementById("preload").style.height=window.innerHeight+"px"}function c(e){document.getElementById("preload").style.width=100*e+"%"}function d(t){console.log("onAssetsLoaded"),h.s.onAssetsLoadingProgress.remove(c),h.s.onAssetsLoaded.remove(d),window.removeEventListener("resize",r),i=new jks.View(e,t),i.s.onReady.addOnce(u),i.s.onResize.add(p),i.s.onOrientationChange.add(f),i.s.switchMode.add(v),i.s.onThumbNavigationShow.add(m),n=new jks.Navigation(e),n.s.onPageNavSelect.add(C),n.s.onIconNavSelect.add(T),n.s.onTapHome.add(x),n.s.onToggleThumbNav.add(S),n.s.navEvent.add(j),o=new jks.PageHome(e,t),s=new jks.PageManager(e,t),TweenLite.set(".content",{borderRadius:"5px 0 0 0"}),g()}function g(){i.containerPages.addChild(o.container),i.containerPages.addChild(s.container),i.containerNavigation.addChild(n.container),TweenLite.delayedCall(.1,i.resizeScreen)}function u(){
o.show(),w(),a="home",n.wakeUp(),TweenLite.delayedCall(1.5,function(){n.show()})}function p(){n.updateView(),o.updateView(),s.updateView()}function f(e){console.log("onOrientationChange",a),n.onOrientationChange(e),"home"==a&&TweenLite.delayedCall(.1333,w)}function w(){console.log("clrs",jks.Controller.getCurrentActivePageID()),"mobile"==jks.Config.getDeviceType()?device.portrait()?jks.SelectNavigation.setButtonColors("home_portrait"):jks.SelectNavigation.setButtonColors("home_landscape"):jks.SelectNavigation.setButtonColors("home_portrait")}function v(e){n.switchMode(e),s.switchMode(e)}function m(e, t){n.thumbNavigationShow(e,t)}function b(e){switch(console.log("viewPage",e),i.s.onThumbNavigationShow.remove(m),jks.SelectNavigation.setButtonColors("default"),e){case"slides":a="slides",s.hide(),s.blendOut(),o.hide(),i.s.onThumbNavigationShow.add(m);break;case"home":a="home",s.hide(),s.blendOut(),w(),o.show(),TweenLite.delayedCall(1.5,n.show),n.s.onKeyDownEvent.remove(y);break;case"vita":k(),a="vita",I(),n.hide(),s.show(),s.blendIn();break;case"kontakt":k(),a="kontakt",I(),n.hide(),s.show(),s.blendIn();break;case"impressum":k(),a="impressum",I(),n.hide(),s.show(),s.blendIn();break;case"aktuelles":k(),a="aktuelles",I(),n.hide(),s.show(),s.blendOut(),o.show()}}function k(){F.forEach(function(e){TweenLite.set(e,{display:"none",opacity:0})})}function I(){var e="#content_"+a;TweenLite.set(e,{display:"block",opacity:1})}function y(e){"next"==e?i.slideNext():i.slidePrev()}function T(e){console.log(e=e||0,"navigation: onIconNavSelect"),D(e)}function C(e){console.log(e=e||0,"navigation: onPageNavSelect"),b(e)}function x(){b("home")}function S(e){i.thumbNavToggle(e)}function j(e,t){if("home"!=jks.Navigation.getCurrentSelectedPage()&&"slides"!=jks.Navigation.getCurrentSelectedPage())switch(e){case"selectionVisible":t?s.hideContent():s.showContent();break;case"navVisible":t?s.hideContent():s.showContent()}}function D(t){n.hide(),e.pageData[t].contentLoaded?N(t):(h.loadSlide(t),h.s.onSlideLoadingProgress.add(L),h.s.onSlideLoaded.add(P),l=!0,i.showSlideLoadingProgress())}function L(e){i.updateSlideLoadingProgress(e)}function P(e){h.s.onSlideLoadingProgress.remove(L),h.s.onSlideLoaded.remove(P),l&&TweenLite.delayedCall(.2,function(){i.hideSlideLoadingProgress(),l=!1,N(e)})}function N(t){b("slides"),i.initSlide(e,t),i.initThumbNavigation(),"mobile"!=jks.Config.getDeviceType()&&(i.initSideNavigation(),n.s.onKeyDownEvent.add(y)),TweenLite.delayedCall(.1,i.resizeScreen)}t=this,console.log("init - Controller || version: ",e.version),window.addEventListener("resize",r),document.getElementById("preload").style.height=window.innerHeight+"px",h.s.onAssetsLoadingProgress.add(c),h.s.onAssetsLoaded.add(d),h.loadAssets();var F=["#content_vita","#content_kontakt","#content_impressum","#content_aktuelles"]}var t,i,n,o,s,a="home",l=!1;jks.Controller=e,jks.Controller.getCurrentActivePageID=function(){return a}}(),this.jks=this.jks||{},function(){function e(e,l,h){function r(){var e=0;return e="mobile"==jks.Config.getDeviceType()?device.portrait()?Math.round(.25*jks.View.getScreenWidth()):Math.round(.25*jks.View.getScreenHeight()):"tablet"==jks.Config.getDeviceType()?device.portrait()?Math.round(jks.View.getScreenWidth()/6):Math.round(jks.View.getScreenHeight()/6):75}function c(e){t.s.onTapDown.dispatch(e)}function d(e){t.s.onTapUp.dispatch(this.ID)}function g(e){jks.ThumbNavigation.getThumbByID(this.ID).onHover()}function u(e){jks.ThumbNavigation.getThumbByID(this.ID).onHoverOut()}t=this,this.selected=!1,this.ID=e,this.s={onTapDown:new signals.Signal,onTapUp:new signals.Signal},i=l,this.thumbSize={width:r(),height:r()};var p=device.portrait()?.6*jks.View.getScreenWidth():300;a=this.thumbSize.height,this.o={saturation:-.5},this.container=new PIXI.Container,this.color=jks.Config.getColor("blue"),n=new PIXI.Sprite(h),n.width=p,n.height=n.width/i,n.x=.5*(this.thumbSize.width-n.width),n.y=.5*(this.thumbSize.height-n.height),this.front=new PIXI.Sprite(h),this.front.width=p,this.front.height=this.front.width/i,this.front.x=.5*(this.thumbSize.width-this.front.width),this.front.y=.5*(this.thumbSize.height-this.front.height),o=new PIXI.filters.ColorMatrixFilter,o.padding=0,o.saturate(-.9),this.front.filters=[o],this.mask=new PIXI.Graphics,this.mask.beginFill(65280),this.mask.drawRect(0,0,this.thumbSize.width,this.thumbSize.height),this.mask.endFill(),this.overlay=new PIXI.Graphics,this.overlay.beginFill(this.color),this.overlay.drawRect(this.mask.x,this.mask.y,this.mask.width,this.mask.height),this.overlay.endFill,this.overlay.scale.x=1,this.overlay.alpha=0,this.outline=new PIXI.Graphics,this.outline.lineStyle(s,this.color),this.outline.drawRect(.5*s,.5*s,this.mask.width-s,this.mask.height-s),this.outline.visible=!1,this.container.addChild(n),"desktop"==jks.Config.getDeviceType()&&this.container.addChild(this.front),this.container.addChild(this.overlay),this.container.addChild(this.outline),this.container.addChild(this.mask),this.container.mask=this.mask,this.mask.interactive=!0,this.mask.buttonMode=!0,this.mask.ID=e,this.mask.on("mousedown",c).on("touchstart",c),this.mask.on("mouseup",d).on("touchend",d),this.mask.on("mouseover",g),this.mask.on("mouseout",u),this.onHover=function(){TweenLite.to(this.front,.3,{alpha:0,ease:Cubic.easeOut})},this.onHoverOut=function(){TweenLite.to(this.front,.4,{alpha:1,ease:Cubic.easeIn})},this.showProgress=function(e){this.overlay.alpha=.2,this.overlay.scale.x=0,TweenLite.to(this.overlay,e,{alpha:.5,ease:Sine.easeInOut}),TweenLite.to(this.overlay.scale,e,{x:1,ease:Circ.easeOut})},this.updateDragProgress=function(e){this.overlay.x=this.thumbSize.width*e},this.select=function(){this.selected=!0,this.outline.visible=!0,this.overlay.x=0,this.overlay.scale.x=1,TweenLite.to(this.overlay,.3,{delay:.2,alpha:.2,ease:Circ.easeOut})},this.unselect=function(){this.selected=!1,this.outline.visible=!1,this.onHoverOut(),TweenLite.to(this.overlay,.2,{alpha:0,ease:Sine.easeIn})}}var t,i,n,o,s=2,a=23;jks.Thumb=e}(),this.jks=this.jks||{},function(){function e(e){function a(e){t.tracker=VelocityTracker.track(t.container,"x,y"),t.shapeWidth=u,t.dragShape.beginFill(4227200),t.dragShape.drawRect(0,0,t.shapeWidth,e.thumbSize.height),t.dragShape.alpha=.2,t.dragShape.endFill(),t.dragShape.interactive=!1,t.dragShape.visible=!1,t.container.addChild(t.dragShape),t.dragShape.on("mousemove",h).on("touchmove",h).on("mouseup",c).on("mouseupoutside",c).on("touchend",c).on("touchendoutside",c),t.onOrientationChange()}function l(e){TweenLite.killTweensOf(t.container),v.startX=e.data.global.x-t.container.x,v.isDragging=!0}function h(e){if(v.isDragging&&(t.container.x=e.data.global.x-v.startX,e.data.global.x<0||e.data.global.x>jks.View.getScreenWidth()||e.data.global.y<t.container.y||e.data.global.y>t.container.y+t.dragShape.height))return void c()}function r(){return t.shapeWidth<=jks.View.getScreenWidth()}function c(e){var i=t.tracker.getVelocity("x"),n={x:{velocity:i,max:.5*jks.View.getScreenWidth()-.5*t.shapeWidth,min:.5*jks.View.getScreenWidth()-.5*t.shapeWidth}},o={x:{velocity:i,max:0,min:-t.shapeWidth+jks.View.getScreenWidth()}};r()?TweenLite.to(t.container,.5,{throwProps:n,onComplete:null,ease:Power2.easeOut}):0!=i?TweenLite.to(t.container,.5,{throwProps:o,onComplete:null,ease:Power2.easeOut}):v.isDragging||TweenLite.to(t.container,.5,{x:0,onComplete:null,ease:Power2.easeOut}),t.deactivateSlideDrag()}function d(){console.log("hideThumbNavigation");for(var e=0;e<t.thumbs.length;e++)TweenLite.to(t.thumbs[e].container,.3,{delay:t.thumbs.length<5?.04*e:0,y:100,alpha:0,ease:Cubic.easeIn,onComplete:function(){t.container.visible=!1}});TweenLite.delayedCall(.5,t.s.onThumbNavigationShow.dispatch,[!1])}function g(){console.log("showThumbNavigation"),t.container.visible=!0;for(var e=0;e<t.thumbs.length;e++)TweenLite.to(t.thumbs[e].container,.3,{delay:.02*e,y:0,alpha:1,ease:Circ.easeOut});t.s.onThumbNavigationShow.dispatch(!0)}t=this,this.s={onClickThumb:new signals.Signal,onThumbNavigationShow:new signals.Signal},this.isLocked=!1,this.thumbs=[],this.selectedThumb=null,this.dragShape=new PIXI.Graphics,this.dragSlideEnabled=!1,i=e;var u=0;this.container=new PIXI.Container,this.container.getWidth=function(){return u},this.container.getHeight=function(){return s},this.onDispatchClick=function(e){console.log("onDispatchClick"),t.isLocked||t.s.onClickThumb.dispatch(e)},this.selectThumb=function(e){t.thumbs[e].select()},this.unselectThumb=function(e){t.thumbs[e].unselect()},this.unselectThumbs=function(e){for(var i=0;i<t.thumbs.length;i++)t.thumbs[i].unselect()},this.showProgress=function(e,i){console.log("dp:",+e+"-"+i),t.thumbs[e].showProgress(i)},this.setSelectedThumb=function(e){this.selectedThumb=t.thumbs[e]},this.updateDragProgress=function(e){this.selectedThumb.updateDragProgress(e)};var p=PIXI.SCALE_MODES.NEAREST,f=!1,w=.17;this.init=function(e){function l(e){console.log("onTapUp"),TweenLite.killDelayedCallsTo(r),t.isLocked||t.s.onClickThumb.dispatch(e)}function h(e){TweenLite.delayedCall(w,r,[e])}function r(e){t.activateSlideDrag(e)}console.log("init - ThumbNavigation"),u=0,t.container.visible=!1,"mobile"!=jks.Config.getDeviceType()&&"tablet"!=jks.Config.getDeviceType()||(n=0,o=0);for(var c=0;c<e.slideNumImages;c++){var d=new jks.Thumb(c,i,PIXI.Texture.fromImage(e.configData.pageData[e.pageID].images[c].src,f,p));s=d.thumbSize.height,u+=d.thumbSize.width+n,d.s.onTapDown.add(h),d.s.onTapUp.add(l),d.container.x=c*(d.thumbSize.width+n),this.container.addChild(d.container),this.thumbs.push(d)}u-=n,t.thumbs[0].select(),a(d),TweenLite.delayedCall(w,function(){t.container.visible=!0})},this.activateSlideDrag=function(e){t.dragSlideEnabled=!0,t.dragShape.visible=!0,t.dragShape.interactive=!0,l(e)},this.deactivateSlideDrag=function(){t.dragShape.visible=!1,t.dragShape.interactive=!1,v.isDragging=!1};var v={startX:0,offsetX:0,isDragging:!1,normalizedDrag:0};this.onOrientationChange=function(){console.log("thumbNavigation - onOrientationChange"),TweenLite.delayedCall(.2,c),"mobile"==jks.Config.getDeviceType()&&(device.portrait()?(TweenLite.killDelayedCallsTo(d),TweenLite.delayedCall(.5,g)):(TweenLite.killDelayedCallsTo(g),TweenLite.delayedCall(2,d)))},this.show=function(){g()},this.hide=function(){d()},this.updateView=function(){"desktop"==jks.Config.getDeviceType()&&(TweenLite.killDelayedCallsTo(c),TweenLite.delayedCall(.2,c)),t.container.y=jks.View.getScreenHeight()-t.container.getHeight()-o}}var t,i,n=10,o=30,s=23;jks.ThumbNavigation=e,jks.ThumbNavigation.getThumbByID=function(e){return t.thumbs[e]},jks.ThumbNavigation.isLocked=function(){return t.isLocked}}(),this.jks=this.jks||{},function(){function e(){function e(){TweenLite.to(i,.3,{x:0,ease:c})}function g(){TweenLite.to(i,.4,{x:-l,ease:d})}function u(){TweenLite.to(n,.3,{x:0,ease:c})}function p(){TweenLite.to(n,.4,{x:l,ease:d})}function f(){t.isLocked||t.s.onTapNext.dispatch()}function w(){t.isLocked||t.s.onTapPrev.dispatch()}t=this,this.s={onTapNext:new signals.Signal,onTapPrev:new signals.Signal},this.isLocked=!1,this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,o=new PIXI.Graphics,o.beginFill(65280),o.drawRect(0,0,h,r),o.endFill(),o.alpha=0,o.x-=h,o.y-=.5*r,o.interactive=!0,i=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("side_nav_arrow").src),i.anchor.x=1,i.anchor.y=.5,i.x=-l,this.sideArrowRight=new PIXI.Container,this.sideArrowRight.addChild(i),this.sideArrowRight.addChild(o),s=new PIXI.Graphics,s.beginFill(65280),s.drawRect(0,0,h,r),s.endFill(),s.alpha=0,s.x=0,s.y-=.5*r,s.interactive=!0,n=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("side_nav_arrow").src),n.anchor.x=1,n.anchor.y=.5,n.scale.x=-1,n.x=l,this.sideArrowLeft=new PIXI.Container,this.sideArrowLeft.addChild(n),this.sideArrowLeft.addChild(s),a=jks.DataHandler.getAssetByID("side_nav_arrow").height,this.container.addChild(this.sideArrowRight),this.container.addChild(this.sideArrowLeft),o.on("mouseover",e),o.on("mouseout",g),o.on("mousedown",f).on("touchstart",f),s.on("mouseover",u),s.on("mouseout",p),s.on("mousedown",w).on("touchstart",w),this.init=function(){console.log("init - SideNavigation",jks.Core.isMobile())},this.update=function(){t.sideArrowRight.x=jks.View.getScreenWidth(),t.sideArrowLeft.x=0,t.container.y=.5*jks.View.getScreenHeight()}}var t,i,n,o,s,a=10,l=15,h=75,r=250,c=Cubic.easeOut,d=Sine.easeOut;jks.SideNavigation=e,jks.SideNavigation.triggerArrow=function(e){"next"==e?(TweenLite.to(i,.3,{x:0,ease:c}),TweenLite.to(i,.4,{delay:.3,x:-l,ease:d})):(TweenLite.to(n,.3,{x:0,ease:c}),TweenLite.to(n,.4,{delay:.3,x:l,ease:d}))}}(),this.jks=this.jks||{},function(){function e(){function e(){TweenLite.to(t.text,.6,{x:jks.Navigation.getTopNavPosition().x-45,ease:Cubic.easeOut})}t=this,console.log("init - TextField"),this.s={onKeyDownEvent:new signals.Signal},this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.fieldCategory=new PIXI.Text("",{fontFamily:"Linotype Feltpen W01 Medium",fontSize:24,fill:jks.Config.getColor("blue"),align:"left"}),this.fieldType=new PIXI.Text("",{fontFamily:"Linotype Feltpen W01 Medium",fontWeight:"bold",fontSize:17,fill:jks.Config.getColor("blue"),align:"left"}),this.fieldType.y=30,this.fieldDescription=new PIXI.Text("",{fontFamily:"Linotype Feltpen W01 Medium",fontSize:16,fill:jks.Config.getColor("blue"),align:"left"}),this.fieldDescription.y=50,this.text=new PIXI.Container,this.text.addChild(this.fieldCategory),this.text.addChild(this.fieldType),this.text.addChild(this.fieldDescription);var i=!0;TweenLite.delayedCall(1,function(){i=!1}),this.updateView=function(){"mobile"==jks.Config.getDeviceType()||jks.Navigation.isMobile()?(TweenLite.killTweensOf(t.text),t.text.x=15,t.text.y=50):i||(TweenLite.killDelayedCallsTo(e),TweenLite.delayedCall(.05,e),t.text.y=50)},t.container.addChild(this.text),t.updateView(),this.setCategory=function(e){t.fieldCategory.setText(e),t.updateView()},this.setText=function(e){t.fieldType.setText(e.type),t.fieldDescription.setText(e.description),t.updateView()},this.hide=function(){t.container.visible=!1},this.show=function(){t.container.visible=!0}}var t;jks.TextField=e}(),this.jks=this.jks||{},function(){function e(e,l){function h(e){PIXI.Filter.call(this,null,e)}function r(){n=new h(l),n.padding=0,n.uniforms.offset.x=1,i.filters=[n]}function c(){i.visible||(i.visible=!0),t.container.visible=!0,TweenLite.delayedCall(.1,function(){t.updateView(),TweenLite.to(n.uniforms.offset,1.3,{x:0,ease:Sine.easeIn})})}function d(){TweenLite.to(n.uniforms.offset,1.5,{x:1,ease:Circ.easeIn,onComplete:function(){t.container.visible=!1}})}t=this,console.log("init - PageHome",jks.Config.getDeviceType()),o=e.backgroundImageSize.width,s=e.backgroundImageSize.height,a=o/s,this.container=new PIXI.Container,i=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("bg_home").src),i.visible=!1,this.container.addChild(i),TweenLite.delayedCall(.3,r),h.prototype=Object.create(PIXI.Filter.prototype),h.prototype.constructor=h;var g,u,p=jks.View.getScreenWidth()/o;i.scale.x=i.scale.y=p,this.updateView=function(){g=jks.View.getScreenWidth(),u=jks.View.getScreenHeight(),p=g/o,i.scale.x=i.scale.y=p,i.height>=u?(p=g/o,i.scale.x=i.scale.y=p,i.x=0,i.y=.5*-(i.height-u)):i.height<=u&&(p=u/s,i.scale.x=i.scale.y=p,i.y=0,i.x=.2*(g-i.width))},this.show=function(){c()},this.hide=function(){d()}}var t,i,n,o,s,a;jks.PageHome=e}(),this.jks=this.jks||{},function(){function e(e,h){function r(e){PIXI.Filter.call(this,null,e)}function c(){n=new r(h),n.padding=0,n.uniforms.offset.x=1,i.filters=[n]}function d(){TweenLite.to(l,1,{delay:.5,opacity:1,ease:Sine.easeOut})}function g(){}function u(){l=document.getElementById("content"),g(),"mobile"!=jks.Config.getDeviceType()&&"tablet"!=jks.Config.getDeviceType()||TweenLite.set(".text",{fontSize:"17px",lineHeight:"23px"}),Draggable.create(".content",{type:"scrollTop",edgeResistance:.5,throwProps:!0})}t=this,console.log("init - PageManager",jks.Config.getDeviceType()),o=e.backgroundImageSize.width,s=e.backgroundImageSize.height,a=o/s,this.container=new PIXI.Container,i=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("bg_vita").src),i.visible=!1,this.container.addChild(i),this.isActive=!1,this.mobileSwitch=!1,TweenLite.delayedCall(.3,c),r.prototype=Object.create(PIXI.Filter.prototype),r.prototype.constructor=r,this.blendIn=function(){i.visible||(i.visible=!0),t.container.visible=!0,TweenLite.delayedCall(.1,function(){t.updateView(),TweenLite.to(n.uniforms.offset,1.3,{x:0,ease:Sine.easeIn})}),TweenLite.delayedCall(1.5,jks.View.hideOverlay)},this.blendOut=function(){TweenLite.to(n.uniforms.offset,1.5,{x:1,ease:Circ.easeIn,onComplete:function(){t.container.visible=!1}})};var p,f,w=jks.View.getScreenWidth()/o;i.scale.x=i.scale.y=w,this.updateView=function(){p=jks.View.getScreenWidth(),f=jks.View.getScreenHeight(),w=p/o,i.scale.x=i.scale.y=w,i.height>=f?(w=p/o,i.scale.x=i.scale.y=w,i.x=0,i.y=.5*-(i.height-f)):i.height<=f&&(w=f/s,i.scale.x=i.scale.y=w,i.y=0,i.x=.5*(p-i.width)),device.portrait()?"mobile"==jks.Config.getDeviceType()?(TweenLite.set(l,{top:.15*jks.View.getScreenHeight()}),l.style.width=jks.View.getScreenWidth()-100+"px",l.style.height=jks.View.getScreenHeight()-100+"px"):"tablet"==jks.Config.getDeviceType()&&(TweenLite.set(l,{top:.15*jks.View.getScreenHeight()}),l.style.width=.7*jks.View.getScreenWidth()+"px",l.style.height=jks.View.getScreenHeight()-100+"px"):(TweenLite.set(l,{top:.2*jks.View.getScreenHeight()}),l.style.width=.5*jks.View.getScreenWidth()+"px",l.style.height=jks.View.getScreenHeight()-70+"px"),"desktop"==jks.Config.getDeviceType()&&(t.mobileSwitch?(TweenLite.set(l,{top:.15*jks.View.getScreenHeight()}),l.style.width=.65*jks.View.getScreenWidth()+"px",l.style.height=jks.View.getScreenHeight()-.15*jks.View.getScreenHeight()+"px"):(TweenLite.set(l,{top:.15*jks.View.getScreenHeight()}),l.style.width=.45*jks.View.getScreenWidth()+"px",l.style.height=jks.View.getScreenHeight()-.15*jks.View.getScreenHeight()+"px"))},this.show=function(e){t.switchMode(jks.View.isMobile()),t.showContent(),t.isActive=!0},this.hide=function(){t.hideContent(),t.isActive=!1},this.showContent=function(){console.log("showContent"),t.switchMode(jks.View.isMobile()),t.updateView(),TweenLite.to(l,.2,{opacity:0,display:"block"}),g(),d()},this.hideContent=function(){console.log("hideContent"),TweenLite.to(l,.5,{display:"none",opacity:0})},this.switchMobile=function(){"mobile"!=jks.Config.getDeviceType()&&"tablet"!=jks.Config.getDeviceType()||TweenLite.set(".text",{fontSize:"17px",lineHeight:"20px"})},this.switchDefault=function(){TweenLite.set(l,{backgroundColor:"rgba(255,255,255,.6)",height:"auto"})},this.switchMode=function(e){console.log("pageManager - switchMode",e),t.mobileSwitch=e,e?t.switchMobile():t.switchDefault()},this.onOrientationChange=function(){console.log("pageVita - onOrientationChange"),g()},u()}var t,i,n,o,s,a,l;jks.PageManager=e}(),mathUtils.getRandom=function(e,t){return e+Math.random()*(t-e)},mathUtils.convertToRange=function(e,t,i){if(e<t[0]||e>t[1])return 1;var n=t[1]-t[0],o=i[1]-i[0],s=e-t[0];return s*o/n+i[0]};