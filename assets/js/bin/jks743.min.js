function mathUtils(){}this.jks=this.jks||{},function(){function e(e){function a(){function t(){function e(){s=new jks.Controller(i,n)}i=new jks.Config(a.getResult()[0]),a.destroy(),n=new jks.DataHandler(i),n.s.onDataHandlerReady.add(e)}console.log("init => core",e);var a;a=o?new createjs.JSONLoader("assets/js/bin/content.json"):new createjs.JSONLoader("assets/js/jks/content.json"),a.addEventListener("complete",t),a.load()}t=this,o=e,a()}var t,i,n,s,o;jks.Core=e,jks.Core.releaseMode=function(){return o}}(),this.jks=this.jks||{},function(){function e(e){t=this,this.version="0.7.4",this.device="",this.debug=!1,this.log=!1,console.log("v - ",t.version),i=e,this.numPages=i.pages.length,this.pages=i.pages,this.pageData=[],this.navigationData={menue:[{title:"vita",selectionID:"vita"},{title:"kontakt",selectionID:"kontakt"},{title:"impressum",selectionID:"impressum"},{title:"aktuelles",selectionID:"aktuelles"}]},this.colors={blue:4227200,light_blue:7449515,lighter_blue:10012615,white:16777215,overlay:13299952},this.shaders=[],this.backgroundImageSize={width:1200,height:800},this.mobileSwitchWidth=620,this.navWidthStop=1440;for(var n=0;n<this.numPages;n++){var s={};s.pageID=n,s.contentLoaded=!1,s.category=i.pages[n].category,s.categoryText=i.pages[n].categoryText,s.numImages=i.pages[n].items.length,s.images=[],s.items=i.pages[n].items,this.pageData.push(s)}this.assets={},this.assets.manifest=[{src:"assets/img/bg_home.jpg",id:"bg_home"},{src:"assets/img/bg_vita.jpg",id:"bg_vita"},{src:"assets/img/navigation/logo_jk.png",id:"logo_jk"},{src:"assets/img/navigation/logo_text.png",id:"logo_text"},{src:"assets/img/navigation/side_nav_arrow.png",id:"side_nav_arrow"},{src:"assets/img/navigation/mobileNavToggleIcon.png",id:"mobileNavToggleIcon"},{src:"assets/img/navigation/mobileNavCloseIcon.png",id:"mobileNavCloseIcon"},{src:"assets/img/navigation/selectNavToggleIconClosed.png",id:"selectNavToggleIconClosed"},{src:"assets/img/navigation/selectNavToggleIconOpen.png",id:"selectNavToggleIconOpen"},{src:"assets/img/navigation/01_meeresrauschen.png",id:"meeresrauschen"},{src:"assets/img/navigation/02_fragmente.png",id:"fragmente"},{src:"assets/img/navigation/03_entschaerft.png",id:"entschaerft"},{src:"assets/img/navigation/04_trauringe.png",id:"trauringe"},{src:"assets/img/navigation/05_zeitlos.png",id:"zeitlos"},{src:"assets/img/navigation/navSelectBackground.png",id:"navSelectBackground"},{src:"assets/img/navigation/thumb_nav_arrow.png",id:"thumb_nav_arrow"},{src:"assets/img/fx/gradient_mask.jpg",id:"gradient_mask"}],device.mobile()?this.device="mobile":device.tablet()||isMobile.apple.tablet?this.device="tablet":device.desktop()&&(this.device="desktop"),(this.debug||this.log)&&(document.getElementById("version").innerHTML="version: "+this.version+"<br/>device: "+this.device+"<br/>dpr: "+jks.Config.getDeviceResolution()+"<br/>webgl: "+PIXI.utils.isWebGLSupported(),document.getElementById("version").style.display="block",this.debug&&(document.getElementById("version").style.width="130px"),this.log&&window.debugLog()),jks.Core.releaseMode()&&window.hideLog(),console.log("Config :: pageData created!")}var t,i;jks.Config=e,jks.Config.getDeviceType=function(){return t.device},jks.Config.getDeviceResolution=function(){var e=device.desktop()?1:res.dppx();return e},jks.Config.getColor=function(e){return t.colors[e]},jks.Config.backgroundImageSize=function(){return t.backgroundImageSize},jks.Config.mobileSwitchWidth=function(){return t.mobileSwitchWidth},jks.Config.getNavWidthStop=function(){return t.navWidthStop},jks.Config.shaders=function(){return t.shaders}}(),this.jks=this.jks||{},function(){function e(e){function o(){console.log("init - DataHandler"),a()}function a(){for(var i=0;i<e.numPages;i++){for(var n=[],o=0;o<e.pages[i].items.length;o++)e.pages[i].items[o].img.src=e.pages[i].items[o].img.src,n.push(e.pages[i].items[o].img);s.push(n)}TweenLite.delayedCall(.0333,function(){t.s.onDataHandlerReady.dispatch()})}function l(){PIXI.loader.load()}function r(e,i){console.log("shader laoded"),t.s.onAssetsLoaded.dispatch(i.shader.data)}t=this,this.s={onDataHandlerReady:new signals.Signal,onAssetsLoadingProgress:new signals.Signal,onAssetsLoaded:new signals.Signal,onSlideLoadingProgress:new signals.Signal,onSlideLoaded:new signals.Signal},this.loadAssets=function(){function i(e){t.s.onAssetsLoadingProgress.dispatch(e.loaded)}function s(){console.log("assets loaded!"),l()}n=new createjs.LoadQueue(!1),n.addEventListener("progress",i),n.addEventListener("complete",s),n.loadManifest(e.assets.manifest)},jks.Core.releaseMode()?PIXI.loader.add("shader","assets/js/bin/filters/treshold.frag"):PIXI.loader.add("shader","assets/js/jks/filters/treshold.frag"),PIXI.loader.once("complete",r),this.loadSlide=function(n){function o(e){t.s.onSlideLoadingProgress.dispatch(e.loaded)}function a(){for(var s=0;s<e.pageData[n].numImages;s++){var o=s+1,a=o<10?"0":"",l=e.pageData[n];l.images.push(i.getResult("img_"+e.pageData[n].category+"_"+a+o))}console.log("pageLoaded!",n),e.pageData[n].contentLoaded=!0,t.s.onSlideLoaded.dispatch(n)}console.log("loadSlide",e.pageData[n]),i=new createjs.LoadQueue(!1),i.addEventListener("progress",o),i.addEventListener("complete",a),i.loadManifest(s[n])},o()}var t,i,n,s=[];jks.DataHandler=e,jks.DataHandler.getAssetByID=function(e){return n.getResult(e)},jks.DataHandler.getShader=function(e){return console.log(t.shaders[0]),t.shaders[0]}}(),this.jks=this.jks||{},function(){function e(){function e(e,t){crossroads.parse(e)}console.log("init - Router"),crossroads.addRoute("/",function(){}),crossroads.addRoute("/user/{userId}",function(e){console.log("user",e)}),crossroads.addRoute("/schmuck/zeitlos",function(){console.log("/schmuck/zeitlos")}),crossroads.addRoute("/page/imprint",function(e){console.log("imprint")}),crossroads.bypassed.add(function(e){console.error(e+" seems to be a dead end...")}),window.addEventListener("hashchange",function(){var e="/",t=window.location.hash;t.length>0&&(e=t.split("#").pop()),crossroads.parse(e)}),hasher.initialized.add(e),hasher.init(),document.body.addEventListener("click",function(){hasher.setHash("user/23")})}jks.Router=e}(),this.jks=this.jks||{},function(){function e(e){function v(){"home"!=f&&(t.s.onTapHome.dispatch(),t.isMobile&&x(),L(),y(),u.reset(),f="home",B=null)}function m(){u=new jks.SelectNavigation(e,g),u.s.onTap.add(k),t.container.addChild(u.container)}function k(e){"slides"!=f&&(f="slides",y()),e!=B&&("mobile"==jks.Config.getDeviceType()&&device.landscape()&&F(),t.s.onIconNavSelect.dispatch(e),B=e)}function b(){for(var i=0,n=0;n<e.navigationData.menue.length;n++){var s=new jks.TopNavButton(e.navigationData.menue[n],n);s.container.x=i,s.container.id=n,s.s.onTap.add(I),i+=s.container.width,n==e.navigationData.menue.length-1&&(O.width=i),o.addChild(s.container),t.topNavButtons.push(s)}C(),j()}function I(e,i){f!=e&&(console.log("onPageNavSelect",i),f=e,y(),t.topNavButtons[i].container.getChildAt(1).style.fontWeight="bolder",t.topNavButtons[i].container.getChildAt(2).alpha=1,u.reset(),B=null,w&&x(),t.s.onPageNavSelect.dispatch(e))}function y(){for(var e=0;e<t.topNavButtons.length;e++)t.topNavButtons[e].container.getChildAt(1).style.fontWeight="normal",t.topNavButtons[e].container.getChildAt(2).alpha=0}function C(){a=new PIXI.Container,a.interactive=!0,a.buttonMode=!0,a.x=o.width+100,a.y=10,a.visible=!1,a.on("mousedown",T).on("touchstart",T);var e=new PIXI.Graphics;e.beginFill(52224),e.drawRect(0,0,35,35),e.endFill,e.alpha=0,l=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("mobileNavToggleIcon").src),r=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("mobileNavCloseIcon").src),l.scale.x=l.scale.y=.5,r.scale.x=r.scale.y=.5,r.visible=!1,a.addChild(e),a.addChild(l),a.addChild(r),o.addChild(a)}function T(){H?x():S(),t.s.navEvent.dispatch("navVisible",H)}function x(){jks.View.hideOverlay(),H=!1,r.visible=!1,l.visible=!0;for(var e=0;e<t.topNavButtons.length;e++)TweenLite.killTweensOf(t.topNavButtons[e].container),TweenLite.set(t.topNavButtons[e].container,{alpha:0}),t.topNavButtons[e].container.visible=!1;"mobile"==jks.Config.getDeviceType()&&device.landscape()&&(W.visible=!0)}function S(){console.log("show NAv!"),L(),p||jks.View.showOverlay(),H=!0,l.visible=!1,r.visible=!0;for(var e=0,i=0;i<t.topNavButtons.length;i++)TweenLite.killTweensOf(t.topNavButtons[i].container),t.topNavButtons[i].container.visible=!0,t.topNavButtons[i].switchMobile(),t.topNavButtons[i].container.x=140,t.topNavButtons[i].container.y=50+e,e+=t.topNavButtons[i].container.height,TweenLite.to(t.topNavButtons[i].container,.5,{alpha:1,delay:.1*i});"mobile"==jks.Config.getDeviceType()&&device.landscape()&&(W.visible=!1)}function j(){h=new PIXI.Container,h.interactive=!0,h.buttonMode=!0,h.x=-50,h.y=3,h.visible=!0,h.on("mousedown",D).on("touchstart",D);var e=new PIXI.Graphics;e.beginFill(13369344),e.drawRect(0,0,45,35),e.endFill,e.alpha=0,c=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("selectNavToggleIconClosed").src),d=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("selectNavToggleIconOpen").src),c.scale.x=c.scale.y=.5,d.scale.x=d.scale.y=.5,c.x=d.x=5,d.visible=!1,h.addChild(e),h.addChild(c),h.addChild(d),o.addChild(h)}function D(){z?L():P(),t.s.navEvent.dispatch("selectionVisible",z)}function L(e){e=e||!1,jks.View.hideOverlay(),z=!1,d.visible=!1,c.visible=!0,u.hide(e),W&&"mobile"==jks.Config.getDeviceType()&&device.landscape()&&(W.visible=!0)}function P(){t.isMobile&&x(),"home"!=f&&jks.View.showOverlay(),z=!0,c.visible=!1,d.visible=!0,u.show(),"mobile"==jks.Config.getDeviceType()&&device.landscape()&&(W.visible=!1)}function N(){W=new PIXI.Container,W.interactive=!0,W.buttonMode=!0,W.pivot.x=.5*A.width,W.pivot.y=.5*A.height,W.visible=!1,W.activated=!1,W.alpha=0,W.on("mouseup",V).on("touchend",V);var e=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("thumb_nav_arrow").src);e.scale.x=e.scale.y=.5,e.y=10,e.x=5;var i=new PIXI.Graphics;i.beginFill(jks.Config.getColor("light_blue")),i.drawRect(0,0,A.width,A.height),i.endFill,i.alpha=0,W.x=.5*jks.View.getScreenWidth(),W.y=jks.View.getScreenHeight()-.5*W.height,W.addChild(i),W.addChild(e),t.container.addChild(W)}function V(){TweenLite.set(W,{alpha:0}),TweenLite.to(W,.3,{delay:.3,alpha:1}),W.activated?(W.activated=!1,W.x=.5*jks.View.getScreenWidth(),W.y=jks.View.getScreenHeight()-.5*W.height,W.rotation=0,W.scale.x=W.scale.y=1):(W.activated=!0,W.rotation=Math.PI,W.scale.x=W.scale.y=.9,W.x=.5*jks.View.getScreenWidth(),W.y=jks.View.getScreenHeight()-W.thumbNavHeight-.5*W.height),t.s.onToggleThumbNav.dispatch(W.activated)}function X(){W.activated=!1,W.visible=!0,W.x=.5*jks.View.getScreenWidth(),W.y=jks.View.getScreenHeight()-.5*W.height,W.rotation=0,W.scale.x=W.scale.y=1,W.alpha=1}function F(){W.visible=!1,W.alpha=0,W.activated=!1}function M(){document.onkeydown=function(e){switch(e.keyCode){case 39:jks.ThumbNavigation.isLocked()||(t.s.onKeyDownEvent.dispatch("next"),jks.SideNavigation.triggerArrow("next"));break;case 37:jks.ThumbNavigation.isLocked()||(t.s.onKeyDownEvent.dispatch("prev"),jks.SideNavigation.triggerArrow("prev"));break;case 38:break;case 40:}}}t=this,console.log("init - Navigation",jks.Config.getDeviceType()),this.s={onKeyDownEvent:new signals.Signal,onIconNavSelect:new signals.Signal,onPageNavSelect:new signals.Signal,onTapHome:new signals.Signal,onToggleThumbNav:new signals.Signal,navEvent:new signals.Signal},this.isMobile=!1,this.topNavButtons=[];var B=null;this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.selectedPageText=null,"desktop"==jks.Config.getDeviceType()&&M(),i=new PIXI.Container,i.interactive=!0,i.buttonMode=!0,i.visible=!1,i.alpha=0,n=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("logo_jk").src),s=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("logo_text").src),s.x=120,i.addChild(n),i.addChild(s),i.on("mousedown",v).on("touchstart",v),this.container.addChild(i),this.wakeUp=function(){i.visible=!0,TweenLite.to(i,2,{alpha:1,ease:Sine.easeOut})};var H=!1;o=new PIXI.Container,t.container.addChild(o),console.log(o.position);var W,O={width:0},z=!0,A={width:61.5,height:45};this.switchMobile=function(){x(),s.visible=!1;for(var e=0,i=0;i<this.topNavButtons.length;i++)t.topNavButtons[i].switchMobile(),t.topNavButtons[i].container.x=140,t.topNavButtons[i].container.y=50+e,e+=t.topNavButtons[i].container.height;u.switchMobile(),h.x=200,h.y=10,a.visible=!0,a.x=255,p=!1,w=!0},this.switchDefault=function(){console.log("n::switchDefault"),S(),"mobile"!=jks.Config.getDeviceType()&&(s.visible=!0);for(var e=0,i=0;i<this.topNavButtons.length;i++)t.topNavButtons[i].switchDefault(),t.topNavButtons[i].container.x=e,t.topNavButtons[i].container.y=0,e+=t.topNavButtons[i].container.width;u.switchDefault(),h.x=-50,h.y=3,a.visible=!1,a.x=o.width+100,p=!1,w=!1},this.switchMode=function(e){console.log("navigation - switchMode",e),t.isMobile=e,p=!0,e?t.switchMobile():t.switchDefault()},this.onOrientationChange=function(){console.log("navigation - onOrientationChange"),"mobile"==jks.Config.getDeviceType()&&("home"!=f&&L(!0),TweenLite.delayedCall(.1,u.onOrientationChange),device.portrait()&&F())},this.thumbNavigationShow=function(e,t){W.thumbNavHeight=t,e||X()},this.hide=function(){L(),W&&"mobile"==jks.Config.getDeviceType()&&(W.visible=!1)},this.show=function(){P()};var _,R,E,U=15,G=60,K=30;this.updateView=function(){_=jks.View.getScreenWidth(),_<=768?(R=mathUtils.convertToRange(_,[0,768],[.35,.4]),TweenLite.set(i,{x:U,y:U})):(R=Math.min(mathUtils.convertToRange(_,[768,1440],[.4,.7]),.7),E=mathUtils.convertToRange(_,[768,1440],[0,1]),TweenLite.set(i,{x:U+E*G,y:U+E*K})),TweenLite.set(i.scale,{x:R,y:R}),"mobile"==jks.Config.getDeviceType()?(o.x=jks.View.getScreenWidth()-O.width,o.y=5):(o.y=10,jks.View.getScreenWidth()<=jks.Config.getNavWidthStop()?o.x=jks.View.getScreenWidth()-O.width-15:o.x=jks.Config.getNavWidthStop()-O.width-15),u&&u.updateView(o.x)},b(),m(),"mobile"==jks.Config.getDeviceType()&&N()}var t,i,n,s,o,a,l,r,h,c,d,g,u,p,w,f="home";jks.Navigation=e,jks.Navigation.getTopNavPosition=function(){return o.position},jks.Navigation.getCurrentSelectedPage=function(){return f},jks.Navigation.isMobile=function(){return w}}(),this.jks=this.jks||{},function(){function e(e,a){function l(){t.s.onTap.dispatch(e.selectionID,a)}t=this,this.s={onTap:new signals.Signal},this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.textField=new PIXI.Text(e.title,{fontFamily:"Linotype Feltpen W01 Medium",fontSize:i,fill:jks.Config.getColor("blue"),align:"left"}),this.shape=new PIXI.Graphics,this.shape.beginFill(56576),this.shape.drawRect(0,0,this.textField.width+2*s,this.textField.height+2*o),this.shape.endFill,this.shape.alpha=0,this.line=new PIXI.Graphics,this.line.lineStyle(1,4227200,1),this.line.moveTo(0,this.textField.height+o),this.line.lineTo(this.textField.width+2*s,this.textField.height+o),this.line.alpha=0,this.container.addChild(this.shape),this.container.addChild(this.textField),this.container.addChild(this.line),this.centerText=function(){this.textField.x=.5*this.shape.width-.5*this.textField.width,this.textField.y=.5*this.shape.height-.5*this.textField.height,this.line.clear(),this.line.lineStyle(1,4227200,1),this.line.moveTo(0,this.textField.height+o),this.line.lineTo(this.textField.width+2*s,this.textField.height+o)},this.setText=function(){this.textField.x=this.shape.width-this.textField.width,this.textField.y=.5*this.shape.height-.5*this.textField.height,this.line.clear(),this.line.lineStyle(1,4227200,1),this.line.moveTo(this.shape.width,this.textField.height+o),this.line.lineTo(this.shape.width-this.textField.width,this.textField.height+o)},this.centerText(),this.switchMobile=function(){this.textField.style.fontSize=n,this.textField.style.align="left",this.shape.width=120,this.shape.x=s,this.shape.height=this.textField.height+2*o,this.setText()},this.switchDefault=function(){this.textField.style.fontSize=i,this.shape.width=this.textField.width+2*s,this.shape.height=this.textField.height+2*o,this.shape.x=0,this.centerText()},this.getWidth=function(){return t.shape.width},this.container.on("mousedown",l).on("touchstart",l)}var t,i=18,n=23,s=10,o=10;jks.TopNavButton=e}(),this.jks=this.jks||{},function(){function e(e,o,a){function l(){return 90*s/.5}function r(){t.s.onTapSelect.dispatch(a)}t=this,this.s={onTapSelect:new signals.Signal},this.id=a,this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.container.on("mousedown",r).on("touchstart",r),this.textField=new PIXI.Text(o,{fontFamily:"Linotype Feltpen W01 Medium",fontSize:i,fill:jks.Config.getColor("light_blue"),align:"left"}),this.textField.style.fill=16763955;var h=jks.Config.getColor("light_blue"),c=jks.Config.getColor("blue"),d=7723738,g={home_portrait:[c,h,h,d,d],home_landscape:[d,d,d,d,d],desk_landscape:[c,h,d,d,d],default:[c,c,c,c,c]};this.setTextColor=function(e){this.textField.style.fill=g[e][a]};var u=new PIXI.Container,p=new PIXI.Sprite.fromImage(e),w=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("navSelectBackground").src);w.visible=!1,u.addChild(w),u.addChild(p),this.shape=new PIXI.Graphics,this.shape.beginFill(8602008),this.shape.drawRect(0,0,l()+this.textField.width+2*n,l()),this.shape.endFill,this.shape.alpha=0,this.shape.x=0,this.container.addChild(u),this.container.addChild(this.shape),this.container.addChild(this.textField),this.switchMobile=function(){s=.37,u.scale.x=u.scale.y=s,this.textField.x=-this.textField.width-n,this.textField.y=.5*this.shape.height-.5*this.textField.height,this.shape.width=l()+this.textField.width+n,this.shape.height=l(),this.shape.x=-this.textField.width-n},this.switchDefault=function(){s="mobile"==jks.Config.getDeviceType()?.37:.45,u.scale.x=u.scale.y=s,this.textField.x=l()+n,this.textField.y=.5*l()-.5*this.textField.height,this.shape.width=l()+this.textField.width+n,this.shape.height=l(),this.shape.x=0},this.portraitMode=function(){"mobile"==jks.Config.getDeviceType()&&(this.textField.x=-this.textField.width-n,this.textField.y=.5*this.shape.height-.5*this.textField.height,this.shape.width=l()+this.textField.width+n,this.shape.height=l(),this.shape.x=-this.textField.width-n)},this.landscapeMode=function(){this.textField.x=.5*l()-.5*this.textField.width,this.textField.y=l(),this.shape.width=this.textField.width,this.shape.height=l()+this.textField.height,this.shape.x=this.textField.x,"mobile"==jks.Config.getDeviceType()},this.select=function(){w.visible=!0,p.alpha=.5},this.unselect=function(){w.visible=!1,p.alpha=1},this.setColor=function(e){console.log("set",e),t.textField.style.fill=e},this.update=function(e){u.scale.x=u.scale.y=e*s},this.getRealImgWidth=function(){return l()},this.getWidth=function(){return t.shape.width},this.getHeight=function(){return t.shape.height}}var t,i=23,n=10,s=.45;jks.SelectNavButton=e}(),this.jks=this.jks||{},function(){function e(e){function s(e){t.s.onTap.dispatch(e);for(var i=0;i<t.buttons.length;i++)t.buttons[i].unselect();t.buttons[e].select()}function o(){for(var e=0;e<t.buttons.length;e++)t.buttons[e].portraitMode(),t.buttons[e].container.x=0,t.buttons[e].container.y=e*(t.buttons[e].getRealImgWidth()+10);t.updateView()}function a(){i=0,n=0,console.log("landscapeMode");for(var e=0;e<t.buttons.length;e++)t.buttons[e].landscapeMode(),t.buttons[e].container.x=i,1==e&&(t.buttons[e].container.x-=10),t.buttons[e].container.y=0,i+=.95*t.buttons[e].container.width+15;n=t.buttons[0].getHeight(),t.updateView()}function l(){}t=this,console.log("init - SelectNavigation"),this.s={onTap:new signals.Signal},this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.buttons=[];for(var r=0;r<e.numPages;r++){var h=new jks.SelectNavButton(jks.DataHandler.getAssetByID(e.pages[r].category).src,e.pages[r].categoryText,r);h.container.alpha=0,h.s.onTapSelect.add(s),h.container.x-=h.getRealImgWidth(),h.container.y=r*(h.getRealImgWidth()+10),t.container.addChild(h.container),t.buttons.push(h)}this.setButtonColors=function(e){for(var i=0;i<t.buttons.length;i++)t.buttons[i].setTextColor(e)},"mobile"==jks.Config.getDeviceType()?device.portrait()?t.setButtonColors("home_portrait"):t.setButtonColors("home_landscape"):t.setButtonColors("home_portrait"),this.reset=function(){for(var e=0;e<t.buttons.length;e++)t.buttons[e].unselect()},this.updateView=function(e){"mobile"==jks.Config.getDeviceType()?device.portrait()?(t.container.x=.6*jks.View.getScreenWidth(),t.container.y=.15*jks.View.getScreenHeight()):(t.container.x=.5*jks.View.getScreenWidth()-.5*i+25,t.container.y=.5*jks.View.getScreenHeight()-.5*n):jks.View.getScreenWidth()<jks.Config.mobileSwitchWidth()?(t.container.x=.6*jks.View.getScreenWidth(),t.container.y=.15*jks.View.getScreenHeight()):(t.container.x=e-45,t.container.y=.15*jks.View.getScreenHeight())},t.updateView(),this.switchMobile=function(){for(var e=0;e<t.buttons.length;e++)t.buttons[e].switchMobile();"mobile"==jks.Config.getDeviceType()&&(device.portrait()?o():a())},this.switchDefault=function(){for(var e=0;e<t.buttons.length;e++)t.buttons[e].switchDefault(),t.buttons[e].container.x=0,t.buttons[e].container.y=e*(t.buttons[e].getRealImgWidth()+10)},this.onOrientationChange=function(){device.portrait()?o():a()},this.lock=function(){t.container.buttonMode=!1,t.container.interactive=!1,t.container.visible=!1},this.unlock=function(){t.container.buttonMode=!0,t.container.interactive=!0,t.container.visible=!0},this.hide=function(e){e=e||!1,console.log("SelectNavigation - hide",e);for(var i=i=e?0:.03,n=(t.buttons.length-1)*i,s=0;s<t.buttons.length;s++)TweenLite.to(t.buttons[s].container,.2,{delay:(n-s)*i,alpha:0,ease:Expo.easeIn});e?t.lock():(TweenLite.killDelayedCallsTo(t.lock),TweenLite.delayedCall(.3,t.lock))};var c=[];this.show=function(){for(var e=0;e<t.buttons.length;e++)TweenLite.set(t.buttons[e].container,{visible:!0,alpha:0}),TweenLite.to(t.buttons[e].container,.3,{delay:.1*e,alpha:1,ease:Sine.easeOut});console.log(c),TweenLite.killDelayedCallsTo(t.lock),t.unlock()},"mobile"==jks.Config.getDeviceType()?(t.switchMobile(),device.portrait()?o():a()):t.switchDefault(),l()}var t,i=0,n=0;jks.SelectNavigation=e,jks.SelectNavigation.setButtonColors=function(e){t.setButtonColors(e)}}(),this.jks=this.jks||{},function(){function e(e,D){function L(){window.addEventListener("resize",J),window.addEventListener("orientationchange",function(){var e;e=device.portrait()?"portrait":"landscape",t.s.onOrientationChange.dispatch(e),q(e)},!1)}function P(){var e=document.getElementById("screen"),t={transparent:!1,backgroundColor:jks.Config.getColor("blue"),resolution:jks.Config.getDeviceResolution(),antialias:!1,autoResize:!1,roundPixels:!0};i=new PIXI.autoDetectRenderer(S(),j(),t),e.appendChild(i.view),n=new PIXI.Container,n.interactive=!0}function N(){p=new PIXI.Graphics,p.beginFill(65382),p.drawRect(0,0,1,1),p.endFill,p.alpha=0,p.interactive=!0,p.buttonMode=!0,p.defaultCursor="auto",p.on("mousedown",V).on("touchstart",V).on("mousemove",X).on("touchmove",X).on("mouseup",F).on("mouseupoutside",F).on("touchend",F).on("touchendoutside",F)}function V(e){ee.startX=e.data.global.x,ee.isDragging=!0,ee.startTransition=!1,ee.range=.7*S(),p.defaultCursor="none",se.setSelectedThumb(y.currentImage)}function X(e){ee.isDragging&&(ee.offsetX=e.data.global.x-ee.startX,ee.offsetX>=0?ee.direction="next":ee.direction="prev",ee.offsetX=Math.abs(ee.offsetX),ee.offsetX>0&&(b||z(),ee.startTransition=!0,se.isLocked=!0),ee.normalizedDrag=mathUtils.convertToRange(ee.offsetX,[0,ee.range],[0,1]),b&&ee.startTransition&&(ee.normalizedDrag<1?O(ee.normalizedDrag):(U(),ee.isDragging=!1,ee.startTransition=!1,b=!1,se.isLocked=!1)))}function F(e){ee.isDragging=!1,p.defaultCursor="auto";var t={p:ee.normalizedDrag};ee.startTransition&&(ee.normalizedDrag<=.5?(y.currentImage=y.previousImage,TweenLite.to(t,1,{p:0,ease:Sine.easeOut,onUpdate:function(){O(t.p)},onComplete:function(){b=!1,se.isLocked=!1,ee.startTransition=!1,h.uniforms.offset.x=1}})):TweenLite.to(t,.5,{p:1,ease:Circ.easeIn,onUpdate:function(){O(t.p)},onComplete:function(){b=!1,se.isLocked=!1,ee.startTransition=!1,h.uniforms.offset.x=1}}))}function M(){o=new PIXI.Container,a=new PIXI.Container,t.containerSlideImages.addChild(o),t.containerSlideImages.addChild(a),l=new PIXI.Sprite,r=new PIXI.Sprite,o.addChild(l),a.addChild(r)}function B(e){PIXI.Filter.call(this,null,e)}function H(){h=new B(D),h.padding=0,W()}function W(){h.uniforms.offset.x=1,c=new PIXI.filters.ColorMatrixFilter,c.saturate(-1),a.filters=[h,c],d=new TimelineLite({paused:!0}),d.add(TweenLite.to(h.uniforms.offset,C,{x:0,ease:Linear.easeNone,onStart:E})),g=new TimelineLite({paused:!0,align:"sequence"}),g.add(TweenLite.to(I,.5,{delay:1,saturation:0,ease:Linear.easeNone,onUpdate:R,onComplete:U}))}function O(e){se.updateDragProgress(e),d.progress(e),g.progress(e)}function z(){"next"==ee.direction?(y.previousImage=y.currentImage,y.currentImage<y.slideNumImages-1?y.currentImage++:y.currentImage=0):"prev"==ee.direction&&(y.previousImage=y.currentImage,y.currentImage>0?y.currentImage--:y.currentImage=y.slideNumImages-1),l.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.previousImage].src),r.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.currentImage].src),b=!0}function A(e){u.setText(y.configData.pageData[y.pageID].items[e])}function _(){se.isLocked=!0,oe&&(oe.isLocked=!0),l.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.previousImage].src,x,T),r.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.currentImage].src,x,T),TweenLite.to(d,C,{progress:1,ease:Sine.easeOut}),TweenLite.to(g,C,{progress:1,ease:Circ.easeOut})}function R(){c.saturate(I.saturation)}function E(){ee.isDragging||se.showProgress(y.currentImage,C)}function U(){I.saturation=-1,h.uniforms.offset.x=1,c.saturate(-1),l.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.currentImage].src),se.unselectThumbs(),se.selectThumb(y.currentImage),se.isLocked=!1,oe&&(oe.isLocked=!1),d.progress(0),g.progress(0),A(y.currentImage)}function G(){w=new PIXI.Graphics,w.beginFill(jks.Config.getColor("overlay")),w.drawRect(0,0,S(),j()),w.endFill,w.alpha=.6,w.interactive=!0,w.visible=!1,f=document.getElementById("progressBar"),Q()}function K(){requestAnimationFrame(K),i.render(n),s&&s.update()}function q(e){se.container&&se.onOrientationChange(e)}function J(e){S()<=jks.Config.mobileSwitchWidth()&&!t.isMobile||"mobile"==jks.Config.getDeviceType()?(t.isMobile=!0,t.s.switchMode.dispatch(t.isMobile)):S()>jks.Config.mobileSwitchWidth()&&t.isMobile&&(t.isMobile=!1,t.s.switchMode.dispatch(t.isMobile)),t.resizeScreen(),t.s.onResize.dispatch()}function Q(){w.width=S(),w.height=j(),f.style.left=.5*S()-60+"px",f.style.top=.5*j()-30+"px"}function Y(){y.isActive&&(se.updateView(),null!=oe.container&&oe.update(),p.width=S(),p.height=j()-se.container.getHeight()-60),w.visible&&Q(),u.updateView()}function Z(){console.log("transitionSwitch"),se.isLocked=!0,oe&&(oe.isLocked=!0),t.resizeScreen(),TweenLite.to(d,C,{progress:1,ease:Sine.easeOut}),TweenLite.to(g,C,{progress:1,ease:Circ.easeOut})}function $(e){t.s.onThumbNavigationShow.dispatch(e,se.container.getHeight())}t=this,v=e.backgroundImageSize.width,m=e.backgroundImageSize.height,k=v/m,console.log("init - View"),this.s={onReady:new signals.Signal,onResize:new signals.Signal,onOrientationChange:new signals.Signal,switchMode:new signals.Signal,onThumbNavigationShow:new signals.Signal},this.isMobile=!1,this.containerPages=new PIXI.Container,this.containerNavigation=new PIXI.Container,this.containerSlideImages=new PIXI.Container,this.containerSlideNavigation=new PIXI.Container;var ee={startX:0,offsetX:0,direction:"",isDragging:!1,normalizedDrag:0};B.prototype=Object.create(PIXI.Filter.prototype),B.prototype.constructor=B,this.showSlideLoadingProgress=function(){w.alpha=0,w.visible=!0,TweenLite.to(w,.2,{alpha:.5,ease:Sine.easeIn}),TweenLite.set(f,{opacity:1,width:0,display:"block"}),Q()},this.hideSlideLoadingProgress=function(){TweenLite.to(f,.2,{opacity:0}),TweenLite.to(w,.2,{alpha:0,ease:Sine.easeOut,onComplete:function(){w.visible=!1,f.style.display="none"}})},this.updateSlideLoadingProgress=function(e){document.getElementById("progressBar").style.width=120*e+"px"};var te,ie,ne=new PIXI.Point(0,0);this.isMobile=!1,P(),M(),H(),N(),G(),n.addChild(t.containerSlideImages),n.addChild(p),n.addChild(t.containerSlideNavigation),n.addChild(t.containerPages),n.addChild(w),n.addChild(t.containerNavigation),u=new jks.TextField,t.containerSlideImages.addChild(u.container),L(),K(),TweenLite.delayedCall(.5,function(){J(),t.s.onReady.dispatch()}),this.resizeScreen=function(){Y(),te=S(),ie=j(),i.view.style.width=te+"px",i.view.style.height=ie+"px",i.resize(te,ie),ne.set(te/v),o.children[0].scale=ne,o.children[0].height>=ie?(ne.set(te/v),o.children[0].scale=ne,o.children[0].x=0,o.children[0].y=.5*-(o.children[0].height-ie)):o.height<=ie&&(ne.set(ie/m),o.children[0].scale=ne,o.children[0].y=0,o.children[0].x=.5*(te-o.children[0].width)),a.children[0].x=o.children[0].x,a.children[0].y=o.children[0].y,a.children[0].scale=o.children[0].scale},this.initSlide=function(e,i){y.isCreated&&(l.texture=PIXI.Texture.fromImage(y.configData.pageData[y.pageID].images[y.currentImage].src,x,T)),y.previousImage=0,y.currentImage=0,y.slideNumImages=e.pageData[i].images.length,y.pageID=i,y.configData=e,y.isCreated?(r.texture=PIXI.Texture.fromImage(y.configData.pageData[i].images[y.currentImage].src),Z()):l.texture=PIXI.Texture.fromImage(y.configData.pageData[i].images[y.currentImage].src),t.resizeScreen(),TweenLite.delayedCall(.5,t.resizeScreen),TweenLite.delayedCall(1,t.resizeScreen),y.isActive=!0,y.isCreated=!0,u.setCategory(y.configData.pageData[i].categoryText),u.show(),A(y.currentImage)};var se={};se.container=null,this.initThumbNavigation=function(){function e(e){e!=y.currentImage&&t.slideTo(e)}se.container&&(console.log("destroy thumb"),se.s.onClickThumb.remove(e),se.container.removeChildren(),t.containerSlideNavigation.removeChild(se.container),se.container=null,se=null),se=new jks.ThumbNavigation(k),se.s.onClickThumb.add(e),se.s.onThumbNavigationShow.add($),t.containerSlideNavigation.addChild(se.container),se.init(y)},this.thumbNavToggle=function(e){e?se.show():se.hide()};var oe={};oe.container=null,this.initSideNavigation=function(){function e(){t.slideNext()}function i(){t.slidePrev()}oe.container&&(oe.s.onTapNext.remove(e),oe.s.onTapPrev.remove(i),t.containerSlideNavigation.removeChild(oe.container),oe.container=null,oe=null),oe=new jks.SideNavigation,t.containerSlideNavigation.addChild(oe.container),oe.s.onTapNext.add(e),oe.s.onTapPrev.add(i)},this.slideNext=function(){y.previousImage=y.currentImage,y.currentImage<y.slideNumImages-1?y.currentImage++:y.currentImage=0,_(),console.log("slideNext ",y.currentImage)},this.slidePrev=function(){y.previousImage=y.currentImage,y.currentImage>0?y.currentImage--:y.currentImage=y.slideNumImages-1,_(),console.log("slidePrev ",y.currentImage)},this.slideTo=function(e){y.previousImage=y.currentImage,y.currentImage=e,_(),console.log("slideTo ",y.currentImage)}}var t,i,n,s,o,a,l,r,h,c,d,g,u,p,w,f,v,m,k,b=!1,I={saturation:-1,none:0},y={isActive:!1,isCreated:!1},C=1.5,T=PIXI.SCALE_MODES.LINEAR,x=!1,S=function(){return window.innerWidth},j=function(){return window.innerHeight};jks.View=e,jks.View.isMobile=function(){return t.isMobile},jks.View.getScreenWidth=function(){return S()},jks.View.getScreenHeight=function(){return j()},jks.View.forceResize=function(){t.resizeScreen()},jks.View.showOverlay=function(){TweenLite.killTweensOf(w),w.visible=!0,w.width=S(),w.height=j(),u.hide(),TweenLite.to(w,.3,{alpha:.6,ease:Sine.easeOut})},jks.View.isOverlay=function(){return w.visible},jks.View.hideOverlay=function(){console.log("hide overlay"),TweenLite.to(w,.3,{alpha:0,ease:Sine.easeIn,onComplete:function(){w.visible=!1,u.show()}})}}(),this.jks=this.jks||{},function(){function e(e,h){
function c(){document.getElementById("preload").style.height=window.innerHeight+"px"}function d(e){document.getElementById("preload").style.width=100*e+"%"}function g(t){console.log("onAssetsLoaded"),h.s.onAssetsLoadingProgress.remove(d),h.s.onAssetsLoaded.remove(g),window.removeEventListener("resize",c),i=new jks.View(e,t),i.s.onReady.addOnce(p),i.s.onResize.add(w),i.s.onOrientationChange.add(f),i.s.switchMode.add(m),i.s.onThumbNavigationShow.add(k),n=new jks.Navigation(e),n.s.onPageNavSelect.add(x),n.s.onIconNavSelect.add(T),n.s.onTapHome.add(S),n.s.onToggleThumbNav.add(j),n.s.navEvent.add(D),s=new jks.PageHome(e,t),o=new jks.PageManager(e,t),TweenLite.set(".content",{borderRadius:"5px 0 0 0"}),u()}function u(){i.containerPages.addChild(s.container),i.containerPages.addChild(o.container),i.containerNavigation.addChild(n.container),TweenLite.delayedCall(.1,i.resizeScreen)}function p(){s.show(),v(),a="home",n.wakeUp(),TweenLite.delayedCall(1.5,function(){n.show()}),w(),TweenLite.delayedCall(1,w)}function w(){n.updateView(),s.updateView(),o.updateView()}function f(e){console.log("c::onOrientationChange",a,l),n.onOrientationChange(e),"home"==a&&TweenLite.delayedCall(.1333,v)}function v(){console.log("clrs",jks.Controller.getCurrentActivePageID(),l),"mobile"==jks.Config.getDeviceType()?"home"==a&&(device.portrait()?jks.SelectNavigation.setButtonColors("home_portrait"):jks.SelectNavigation.setButtonColors("home_landscape")):"home"==a?l?jks.SelectNavigation.setButtonColors("home_portrait"):jks.SelectNavigation.setButtonColors("desk_landscape"):jks.SelectNavigation.setButtonColors("default")}function m(e){l=e,n.switchMode(e),o.switchMode(e),v()}function k(e,t){n.thumbNavigationShow(e,t)}function b(e){switch(console.log("viewPage",e),i.s.onThumbNavigationShow.remove(k),jks.SelectNavigation.setButtonColors("default"),e){case"slides":a="slides",o.hide(),o.blendOut(),s.hide(),i.s.onThumbNavigationShow.add(k);break;case"home":a="home",o.hide(),o.blendOut(),v(),s.show(),TweenLite.delayedCall(1.5,n.show),n.s.onKeyDownEvent.remove(C);break;case"vita":I(),a="vita",y(),n.hide(),o.show(),o.blendIn();break;case"kontakt":I(),a="kontakt",y(),n.hide(),o.show(),o.blendIn();break;case"impressum":I(),a="impressum",y(),n.hide(),o.show(),o.blendIn();break;case"aktuelles":I(),a="aktuelles",y(),n.hide(),o.show(),o.blendOut(),s.show()}}function I(){X.forEach(function(e){TweenLite.set(e,{display:"none",opacity:0})})}function y(){var e="#content_"+a;TweenLite.set(e,{display:"block",opacity:1})}function C(e){"next"==e?i.slideNext():i.slidePrev()}function T(e){console.log(e=e||0,"navigation: onIconNavSelect"),L(e)}function x(e){console.log(e=e||0,"navigation: onPageNavSelect"),b(e)}function S(){b("home")}function j(e){i.thumbNavToggle(e)}function D(e,t){if("home"!=jks.Navigation.getCurrentSelectedPage()&&"slides"!=jks.Navigation.getCurrentSelectedPage())switch(e){case"selectionVisible":t?o.hideContent():o.showContent();break;case"navVisible":t?o.hideContent():o.showContent()}}function L(t){n.hide(),e.pageData[t].contentLoaded?V(t):(h.loadSlide(t),h.s.onSlideLoadingProgress.add(P),h.s.onSlideLoaded.add(N),r=!0,i.showSlideLoadingProgress())}function P(e){i.updateSlideLoadingProgress(e)}function N(e){h.s.onSlideLoadingProgress.remove(P),h.s.onSlideLoaded.remove(N),r&&TweenLite.delayedCall(.2,function(){i.hideSlideLoadingProgress(),r=!1,V(e)})}function V(t){b("slides"),i.initSlide(e,t),i.initThumbNavigation(),"mobile"!=jks.Config.getDeviceType()&&(i.initSideNavigation(),n.s.onKeyDownEvent.add(C)),jks.View.forceResize()}t=this,console.log("init - Controller || version: ",e.version),window.addEventListener("resize",c),document.getElementById("preload").style.height=window.innerHeight+"px",h.s.onAssetsLoadingProgress.add(d),h.s.onAssetsLoaded.add(g),h.loadAssets();var X=["#content_vita","#content_kontakt","#content_impressum","#content_aktuelles"]}var t,i,n,s,o,a="home",l=!1,r=!1;jks.Controller=e,jks.Controller.getCurrentActivePageID=function(){return a}}(),this.jks=this.jks||{},function(){function e(e,l,r){function h(){var e=0;return e="mobile"==jks.Config.getDeviceType()?device.portrait()?Math.round(.25*jks.View.getScreenWidth()):Math.round(.25*jks.View.getScreenHeight()):"tablet"==jks.Config.getDeviceType()?device.portrait()?Math.round(jks.View.getScreenWidth()/6):Math.round(jks.View.getScreenHeight()/6):75}function c(e){t.s.onTapDown.dispatch(e)}function d(e){t.s.onTapUp.dispatch(this.ID)}function g(e){jks.ThumbNavigation.getThumbByID(this.ID).onHover()}function u(e){jks.ThumbNavigation.getThumbByID(this.ID).onHoverOut()}t=this,this.selected=!1,this.ID=e,this.s={onTapDown:new signals.Signal,onTapUp:new signals.Signal},i=l,this.thumbSize={width:h(),height:h()};var p=device.portrait()?.6*jks.View.getScreenWidth():300;a=this.thumbSize.height,this.o={saturation:-.5},this.container=new PIXI.Container,this.color=jks.Config.getColor("blue"),n=new PIXI.Sprite(r),n.width=p,n.height=n.width/i,n.x=.5*(this.thumbSize.width-n.width),n.y=.5*(this.thumbSize.height-n.height),this.front=new PIXI.Sprite(r),this.front.width=p,this.front.height=this.front.width/i,this.front.x=.5*(this.thumbSize.width-this.front.width),this.front.y=.5*(this.thumbSize.height-this.front.height),s=new PIXI.filters.ColorMatrixFilter,s.padding=0,s.saturate(-.9),this.front.filters=[s],this.mask=new PIXI.Graphics,this.mask.beginFill(65280),this.mask.drawRect(0,0,this.thumbSize.width,this.thumbSize.height),this.mask.endFill(),this.overlay=new PIXI.Graphics,this.overlay.beginFill(this.color),this.overlay.drawRect(this.mask.x,this.mask.y,this.mask.width,this.mask.height),this.overlay.endFill,this.overlay.scale.x=1,this.overlay.alpha=0,this.outline=new PIXI.Graphics,this.outline.lineStyle(o,this.color),this.outline.drawRect(.5*o,.5*o,this.mask.width-o,this.mask.height-o),this.outline.visible=!1,this.container.addChild(n),"desktop"==jks.Config.getDeviceType()&&this.container.addChild(this.front),this.container.addChild(this.overlay),this.container.addChild(this.outline),this.container.addChild(this.mask),this.container.mask=this.mask,this.mask.interactive=!0,this.mask.buttonMode=!0,this.mask.ID=e,this.mask.on("mousedown",c).on("touchstart",c),this.mask.on("mouseup",d).on("touchend",d),this.mask.on("mouseover",g),this.mask.on("mouseout",u),this.onHover=function(){TweenLite.to(this.front,.3,{alpha:0,ease:Cubic.easeOut})},this.onHoverOut=function(){TweenLite.to(this.front,.4,{alpha:1,ease:Cubic.easeIn})},this.showProgress=function(e){this.overlay.alpha=.2,this.overlay.scale.x=0,TweenLite.to(this.overlay,e,{alpha:.5,ease:Sine.easeInOut}),TweenLite.to(this.overlay.scale,e,{x:1,ease:Circ.easeOut})},this.updateDragProgress=function(e){this.overlay.x=this.thumbSize.width*e},this.select=function(){this.selected=!0,this.outline.visible=!0,this.overlay.x=0,this.overlay.scale.x=1,TweenLite.to(this.overlay,.3,{delay:.2,alpha:.2,ease:Circ.easeOut})},this.unselect=function(){this.selected=!1,this.outline.visible=!1,this.onHoverOut(),TweenLite.to(this.overlay,.2,{alpha:0,ease:Sine.easeIn})}}var t,i,n,s,o=2,a=23;jks.Thumb=e}(),this.jks=this.jks||{},function(){function e(e){function a(e){t.tracker=VelocityTracker.track(t.container,"x,y"),t.shapeWidth=u,t.dragShape.beginFill(4227200),t.dragShape.drawRect(0,0,t.shapeWidth,e.thumbSize.height),t.dragShape.alpha=.2,t.dragShape.endFill(),t.dragShape.interactive=!1,t.dragShape.visible=!1,t.container.addChild(t.dragShape),t.dragShape.on("mousemove",r).on("touchmove",r).on("mouseup",c).on("mouseupoutside",c).on("touchend",c).on("touchendoutside",c),t.onOrientationChange()}function l(e){TweenLite.killTweensOf(t.container),v.startX=e.data.global.x-t.container.x,v.isDragging=!0}function r(e){if(v.isDragging&&(t.container.x=e.data.global.x-v.startX,e.data.global.x<0||e.data.global.x>jks.View.getScreenWidth()||e.data.global.y<t.container.y||e.data.global.y>t.container.y+t.dragShape.height))return void c()}function h(){return t.shapeWidth<=jks.View.getScreenWidth()}function c(e){var i=t.tracker.getVelocity("x"),n={x:{velocity:i,max:.5*jks.View.getScreenWidth()-.5*t.shapeWidth,min:.5*jks.View.getScreenWidth()-.5*t.shapeWidth}},s={x:{velocity:i,max:0,min:-t.shapeWidth+jks.View.getScreenWidth()}};h()?TweenLite.to(t.container,.5,{throwProps:n,onComplete:null,ease:Power2.easeOut}):0!=i?TweenLite.to(t.container,.5,{throwProps:s,onComplete:null,ease:Power2.easeOut}):v.isDragging||TweenLite.to(t.container,.5,{x:0,onComplete:null,ease:Power2.easeOut}),t.deactivateSlideDrag()}function d(){console.log("hideThumbNavigation");for(var e=0;e<t.thumbs.length;e++)TweenLite.to(t.thumbs[e].container,.3,{delay:t.thumbs.length<5?.04*e:0,y:100,alpha:0,ease:Cubic.easeIn,onComplete:function(){t.container.visible=!1}});TweenLite.delayedCall(.5,t.s.onThumbNavigationShow.dispatch,[!1])}function g(){console.log("showThumbNavigation"),t.container.visible=!0;for(var e=0;e<t.thumbs.length;e++)TweenLite.to(t.thumbs[e].container,.3,{delay:.02*e,y:0,alpha:1,ease:Circ.easeOut});t.s.onThumbNavigationShow.dispatch(!0)}t=this,this.s={onClickThumb:new signals.Signal,onThumbNavigationShow:new signals.Signal},this.isLocked=!1,this.thumbs=[],this.selectedThumb=null,this.dragShape=new PIXI.Graphics,this.dragSlideEnabled=!1,i=e;var u=0;this.container=new PIXI.Container,this.container.getWidth=function(){return u},this.container.getHeight=function(){return o},this.onDispatchClick=function(e){console.log("onDispatchClick"),t.isLocked||t.s.onClickThumb.dispatch(e)},this.selectThumb=function(e){t.thumbs[e].select()},this.unselectThumb=function(e){t.thumbs[e].unselect()},this.unselectThumbs=function(e){for(var i=0;i<t.thumbs.length;i++)t.thumbs[i].unselect()},this.showProgress=function(e,i){console.log("dp:",+e+"-"+i),t.thumbs[e].showProgress(i)},this.setSelectedThumb=function(e){this.selectedThumb=t.thumbs[e]},this.updateDragProgress=function(e){this.selectedThumb.updateDragProgress(e)};var p=PIXI.SCALE_MODES.NEAREST,w=!1,f=.17;this.init=function(e){function l(e){console.log("onTapUp"),TweenLite.killDelayedCallsTo(h),t.isLocked||t.s.onClickThumb.dispatch(e)}function r(e){TweenLite.delayedCall(f,h,[e])}function h(e){t.activateSlideDrag(e)}console.log("init - ThumbNavigation"),u=0,t.container.visible=!1,"mobile"!=jks.Config.getDeviceType()&&"tablet"!=jks.Config.getDeviceType()||(n=0,s=0);for(var c=0;c<e.slideNumImages;c++){var d=new jks.Thumb(c,i,PIXI.Texture.fromImage(e.configData.pageData[e.pageID].images[c].src,w,p));o=d.thumbSize.height,u+=d.thumbSize.width+n,d.s.onTapDown.add(r),d.s.onTapUp.add(l),d.container.x=c*(d.thumbSize.width+n),this.container.addChild(d.container),this.thumbs.push(d)}u-=n,t.thumbs[0].select(),a(d),TweenLite.delayedCall(f,function(){t.container.visible=!0})},this.activateSlideDrag=function(e){t.dragSlideEnabled=!0,t.dragShape.visible=!0,t.dragShape.interactive=!0,l(e)},this.deactivateSlideDrag=function(){t.dragShape.visible=!1,t.dragShape.interactive=!1,v.isDragging=!1};var v={startX:0,offsetX:0,isDragging:!1,normalizedDrag:0};this.onOrientationChange=function(){console.log("thumbNavigation - onOrientationChange"),TweenLite.delayedCall(.2,c),"mobile"==jks.Config.getDeviceType()&&(device.portrait()?(TweenLite.killDelayedCallsTo(d),TweenLite.delayedCall(.5,g)):(TweenLite.killDelayedCallsTo(g),TweenLite.delayedCall(2,d)))},this.show=function(){g()},this.hide=function(){d()},this.updateView=function(){"desktop"==jks.Config.getDeviceType()&&(TweenLite.killDelayedCallsTo(c),TweenLite.delayedCall(.2,c)),t.container.y=jks.View.getScreenHeight()-t.container.getHeight()-s}}var t,i,n=10,s=30,o=23;jks.ThumbNavigation=e,jks.ThumbNavigation.getThumbByID=function(e){return t.thumbs[e]},jks.ThumbNavigation.isLocked=function(){return t.isLocked}}(),this.jks=this.jks||{},function(){function e(){function e(){TweenLite.to(i,.3,{x:0,ease:c})}function g(){TweenLite.to(i,.4,{x:-l,ease:d})}function u(){TweenLite.to(n,.3,{x:0,ease:c})}function p(){TweenLite.to(n,.4,{x:l,ease:d})}function w(){t.isLocked||t.s.onTapNext.dispatch()}function f(){t.isLocked||t.s.onTapPrev.dispatch()}t=this,this.s={onTapNext:new signals.Signal,onTapPrev:new signals.Signal},this.isLocked=!1,this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,s=new PIXI.Graphics,s.beginFill(65280),s.drawRect(0,0,r,h),s.endFill(),s.alpha=0,s.x-=r,s.y-=.5*h,s.interactive=!0,i=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("side_nav_arrow").src),i.anchor.x=1,i.anchor.y=.5,i.x=-l,this.sideArrowRight=new PIXI.Container,this.sideArrowRight.addChild(i),this.sideArrowRight.addChild(s),o=new PIXI.Graphics,o.beginFill(65280),o.drawRect(0,0,r,h),o.endFill(),o.alpha=0,o.x=0,o.y-=.5*h,o.interactive=!0,n=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("side_nav_arrow").src),n.anchor.x=1,n.anchor.y=.5,n.scale.x=-1,n.x=l,this.sideArrowLeft=new PIXI.Container,this.sideArrowLeft.addChild(n),this.sideArrowLeft.addChild(o),a=jks.DataHandler.getAssetByID("side_nav_arrow").height,this.container.addChild(this.sideArrowRight),this.container.addChild(this.sideArrowLeft),s.on("mouseover",e),s.on("mouseout",g),s.on("mousedown",w).on("touchstart",w),o.on("mouseover",u),o.on("mouseout",p),o.on("mousedown",f).on("touchstart",f),this.init=function(){console.log("init - SideNavigation",jks.Core.isMobile())},this.update=function(){t.sideArrowRight.x=jks.View.getScreenWidth(),t.sideArrowLeft.x=0,t.container.y=.5*jks.View.getScreenHeight()}}var t,i,n,s,o,a=10,l=15,r=75,h=250,c=Cubic.easeOut,d=Sine.easeOut;jks.SideNavigation=e,jks.SideNavigation.triggerArrow=function(e){"next"==e?(TweenLite.to(i,.3,{x:0,ease:c}),TweenLite.to(i,.4,{delay:.3,x:-l,ease:d})):(TweenLite.to(n,.3,{x:0,ease:c}),TweenLite.to(n,.4,{delay:.3,x:l,ease:d}))}}(),this.jks=this.jks||{},function(){function e(){function e(){TweenLite.to(t.text,.6,{x:jks.Navigation.getTopNavPosition().x-45,ease:Cubic.easeOut})}t=this,console.log("init - TextField"),this.s={onKeyDownEvent:new signals.Signal},this.container=new PIXI.Container,this.container.interactive=!0,this.container.buttonMode=!0,this.fieldCategory=new PIXI.Text("",{fontFamily:"Linotype Feltpen W01 Medium",fontSize:24,fill:jks.Config.getColor("blue"),align:"left"}),this.fieldType=new PIXI.Text("",{fontFamily:"Linotype Feltpen W01 Medium",fontWeight:"bold",fontSize:17,fill:jks.Config.getColor("blue"),align:"left"}),this.fieldType.y=30,this.fieldDescription=new PIXI.Text("",{fontFamily:"Linotype Feltpen W01 Medium",fontSize:16,fill:jks.Config.getColor("blue"),align:"left"}),this.fieldDescription.y=50,this.text=new PIXI.Container,this.text.addChild(this.fieldCategory),this.text.addChild(this.fieldType),this.text.addChild(this.fieldDescription);var s=!0;TweenLite.delayedCall(1,function(){s=!1});var o=1.5,a=16777215,l=0;this.setShadow=function(){this.fieldCategory.style.dropShadow=!0,this.fieldCategory.style.dropShadowDistance=o,this.fieldCategory.style.dropShadowColor=a,this.fieldCategory.style.dropShadowBlur=l,this.fieldType.style.dropShadow=!0,this.fieldType.style.dropShadowDistance=o,this.fieldType.style.dropShadowColor=a,this.fieldType.style.dropShadowBlur=l,this.fieldDescription.style.dropShadow=!0,this.fieldDescription.style.dropShadowDistance=o,this.fieldDescription.style.dropShadowColor=a,this.fieldDescription.style.dropShadowBlur=l},this.updateView=function(){"mobile"==jks.Config.getDeviceType()||jks.Navigation.isMobile()?(TweenLite.killTweensOf(t.text),t.text.x=15,t.text.y=50):s||(TweenLite.killDelayedCallsTo(e),TweenLite.delayedCall(.05,e),t.text.y=50)},i=700,this.textMask=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("gradient_mask").src),this.textMask.x=0,this.container.addChild(this.text),this.text.addChild(this.textMask),this.fieldType.mask=this.textMask,this.fieldDescription.mask=this.textMask,t.updateView(),this.setCategory=function(e){t.fieldCategory.setText(e),t.updateView()},this.setText=function(e){function s(){t.fieldType.setText(e.type),t.fieldDescription.setText(e.description),n=e.description,TweenLite.to(t.textMask,1.5,{delay:.3,alpha:1,x:0,ease:Sine.easeOut})}console.log(":: setText"),""==e.type?t.fieldDescription.y=30:t.fieldDescription.y=50,e.description!=n&&TweenLite.to(t.textMask,.4,{alpha:1,x:-i,ease:Cubic.easeIn,onComplete:s}),t.updateView()},this.hide=function(){t.container.visible=!1},this.show=function(){t.container.visible=!0}}var t,i=700,n="";jks.TextField=e}(),this.jks=this.jks||{},function(){function e(e,l){function r(e){PIXI.Filter.call(this,null,e)}function h(){n=new r(l),n.padding=0,n.uniforms.offset.x=1,i.filters=[n],t.updateView()}function c(){i.visible||(i.visible=!0),t.container.visible=!0,t.updateView(),TweenLite.delayedCall(.1,function(){t.updateView(),TweenLite.to(n.uniforms.offset,1.3,{x:0,ease:Sine.easeIn})})}function d(){TweenLite.to(n.uniforms.offset,1.5,{x:1,ease:Circ.easeIn,onComplete:function(){t.container.visible=!1}})}t=this,console.log("init - PageHome",jks.Config.getDeviceType()),s=e.backgroundImageSize.width,o=e.backgroundImageSize.height,a=s/o,this.container=new PIXI.Container,i=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("bg_home").src),i.visible=!1,this.container.addChild(i),TweenLite.delayedCall(.3,h),r.prototype=Object.create(PIXI.Filter.prototype),r.prototype.constructor=r;var g,u,p=jks.View.getScreenWidth()/s;i.scale.x=i.scale.y=p,this.updateView=function(){g=jks.View.getScreenWidth(),u=jks.View.getScreenHeight(),p=g/s,i.scale.x=i.scale.y=p,i.height>=u?(p=g/s,i.scale.x=i.scale.y=p,i.x=0,i.y=.5*-(i.height-u)):i.height<=u&&(p=u/o,i.scale.x=i.scale.y=p,i.y=0,i.x=.2*(g-i.width))},this.show=function(){c()},this.hide=function(){d()}}var t,i,n,s,o,a;jks.PageHome=e}(),this.jks=this.jks||{},function(){function e(e,r){function h(e){PIXI.Filter.call(this,null,e)}function c(){n=new h(r),n.padding=0,n.uniforms.offset.x=1,i.filters=[n]}function d(){TweenLite.to(l,1,{delay:.5,opacity:1,ease:Sine.easeOut})}function g(){}function u(){l=document.getElementById("content"),g(),"mobile"!=jks.Config.getDeviceType()&&"tablet"!=jks.Config.getDeviceType()||TweenLite.set(".text",{fontSize:"17px",lineHeight:"23px"}),Draggable.create(".content",{type:"scrollTop",edgeResistance:.5,throwProps:!0})}t=this,console.log("init - PageManager",jks.Config.getDeviceType()),s=e.backgroundImageSize.width,o=e.backgroundImageSize.height,a=s/o,this.container=new PIXI.Container,i=new PIXI.Sprite.fromImage(jks.DataHandler.getAssetByID("bg_vita").src),i.visible=!1,this.container.addChild(i),this.isActive=!1,this.mobileSwitch=!1,TweenLite.delayedCall(.3,c),h.prototype=Object.create(PIXI.Filter.prototype),h.prototype.constructor=h,this.blendIn=function(){i.visible||(i.visible=!0),t.container.visible=!0,TweenLite.delayedCall(.1,function(){t.updateView(),TweenLite.to(n.uniforms.offset,1.3,{x:0,ease:Sine.easeIn})}),TweenLite.delayedCall(1.5,jks.View.hideOverlay)},this.blendOut=function(){TweenLite.to(n.uniforms.offset,1.5,{x:1,ease:Circ.easeIn,onComplete:function(){t.container.visible=!1}})};var p,w,f=jks.View.getScreenWidth()/s;i.scale.x=i.scale.y=f,this.updateView=function(){p=jks.View.getScreenWidth(),w=jks.View.getScreenHeight(),f=p/s,i.scale.x=i.scale.y=f,i.height>=w?(f=p/s,i.scale.x=i.scale.y=f,i.x=0,i.y=.5*-(i.height-w)):i.height<=w&&(f=w/o,i.scale.x=i.scale.y=f,i.y=0,i.x=.5*(p-i.width)),device.portrait()?"mobile"==jks.Config.getDeviceType()?(TweenLite.set(l,{top:.15*jks.View.getScreenHeight()}),l.style.width=jks.View.getScreenWidth()-100+"px",l.style.height=jks.View.getScreenHeight()-100+"px"):"tablet"==jks.Config.getDeviceType()&&(TweenLite.set(l,{top:.3*jks.View.getScreenHeight()}),l.style.width=.7*jks.View.getScreenWidth()+"px",l.style.height=jks.View.getScreenHeight()-100+"px"):(TweenLite.set(l,{top:.2*jks.View.getScreenHeight()}),l.style.width=.5*jks.View.getScreenWidth()+"px",l.style.height=jks.View.getScreenHeight()-70+"px"),"desktop"==jks.Config.getDeviceType()&&(t.mobileSwitch?(TweenLite.set(l,{top:.2*jks.View.getScreenHeight()}),l.style.width=.65*jks.View.getScreenWidth()+"px",l.style.height=jks.View.getScreenHeight()-.25*jks.View.getScreenHeight()+"px"):("vita"==jks.Controller.getCurrentActivePageID()?(TweenLite.set(l,{top:.45*jks.View.getScreenHeight()}),l.style.maxWidth="400px"):"kontakt"==jks.Controller.getCurrentActivePageID()?(TweenLite.set(l,{top:.35*jks.View.getScreenHeight()}),l.style.maxWidth="300px"):"aktuelles"==jks.Controller.getCurrentActivePageID()?(TweenLite.set(l,{top:.35*jks.View.getScreenHeight()}),l.style.maxWidth="300px"):(TweenLite.set(l,{top:.25*jks.View.getScreenHeight()}),l.style.maxWidth="450px"),l.style.width=.45*jks.View.getScreenWidth()+"px",l.style.height=jks.View.getScreenHeight()-.15*jks.View.getScreenHeight()+"px"))},this.show=function(e){t.switchMode(jks.View.isMobile()),t.showContent(),t.isActive=!0},this.hide=function(){t.hideContent(),t.isActive=!1},this.showContent=function(){console.log("showContent"),t.switchMode(jks.View.isMobile()),t.updateView(),TweenLite.to(l,0,{opacity:0,display:"block"}),g(),d()},this.hideContent=function(){console.log("hideContent"),TweenLite.to(l,.5,{display:"none",opacity:0})},this.switchMobile=function(){"mobile"!=jks.Config.getDeviceType()&&"tablet"!=jks.Config.getDeviceType()||TweenLite.set(".text",{fontSize:"17px",lineHeight:"20px"})},this.switchDefault=function(){TweenLite.set(l,{backgroundColor:"rgba(255,255,255,.6)",height:"auto"})},this.switchMode=function(e){console.log("pageManager - switchMode",e),t.mobileSwitch=e,e?t.switchMobile():t.switchDefault()},this.onOrientationChange=function(){console.log("pageVita - onOrientationChange"),g()},u()}var t,i,n,s,o,a,l;jks.PageManager=e}(),mathUtils.getRandom=function(e,t){return e+Math.random()*(t-e)},mathUtils.convertToRange=function(e,t,i){if(e<t[0]||e>t[1])return 1;var n=t[1]-t[0],s=i[1]-i[0],o=e-t[0];return o*s/n+i[0]};